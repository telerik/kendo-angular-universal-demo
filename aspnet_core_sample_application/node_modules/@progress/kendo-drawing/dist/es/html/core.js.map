{"version":3,"file":"core.js","sources":["core.js"],"sourcesContent":["/* eslint-disable no-multi-spaces, key-spacing, indent, camelcase, space-before-blocks, eqeqeq, brace-style */\n/* eslint-disable space-infix-ops, space-before-function-paren, array-bracket-spacing, object-curly-spacing */\n/* eslint-disable no-nested-ternary, max-params, default-case, no-else-return, no-empty, yoda */\n/* eslint-disable no-param-reassign, no-var, block-scoped-var */\n\nimport * as geo from \"../geometry\";\nimport * as PDF from \"../pdf\";\nimport { arabicToRoman, createPromise, measureText, mergeSort } from '../util';\nimport { parseColor as utils_parseColor, support, template as compileTemplate } from \"../common\";\nimport { Path, Text, Group, Image, Circle, LinearGradient } from \"../drawing\";\n\nconst browser = support.browser;\n/*\n\n  XXX: to test:\n\n  - cloneNodes function:\n    - drawing document containing canvas with page breaking\n    - drawing document with named radio <input>-s (should not clear selection)\n    - IE9/IE10 don't support el.dataset; do they copy user data?\n\n  - repeating table headers/footers on page breaking\n\n  - forceBreak, keepTogether\n\n  - avoidLinks\n\n */\n\n/* -----[ local vars ]----- */\n\nfunction slice(thing) {\n    return Array.prototype.slice.call(thing);\n}\n\nvar KENDO_PSEUDO_ELEMENT = \"KENDO-PSEUDO-ELEMENT\";\n\nvar IMAGE_CACHE = {};\n\nvar nodeInfo = {};\nnodeInfo._root = nodeInfo;\n\n/* -----[ Custom Text node to speed up rendering in PDF ]----- */\n\nclass TextRect extends Text {\n    constructor(str, rect, options) {\n        super(str, rect.getOrigin(), options);\n        this._pdfRect = rect;\n    }\n    rect() {\n        // this is the crux of it: we can avoid a call to\n        // measure(), which is what the base class does, since we\n        // already know the rect.  measure() is s-l-o-w.\n        return this._pdfRect;\n    }\n    rawBBox() {\n        // also let's avoid creating a new rectangle.\n        return this._pdfRect;\n    }\n}\n\nfunction addClass(el, cls) {\n    if (el.classList) {\n        el.classList.add(cls);\n    } else {\n        el.className += \" \" + cls;\n    }\n}\n\nfunction removeClass(el, cls) {\n    if (el.classList) {\n        el.classList.remove(cls);\n    } else {\n        el.className = el.className.split(/\\s+/).reduce(function(a, word){\n            if (word != cls) {\n                a.push(word);\n            }\n            return a;\n        }, []).join(\" \");\n    }\n}\n\nfunction setCSS(el, styles) {\n    Object.keys(styles).forEach(function(key){\n        el.style[key] = styles[key];\n    });\n}\n\nvar matches = typeof Element !== \"undefined\" && Element.prototype && (function(p){\n    if (p.matches) {\n        return function(el, selector) { return el.matches(selector); };\n    }\n    if (p.webkitMatchesSelector) {\n        return function(el, selector) { return el.webkitMatchesSelector(selector); };\n    }\n    if (p.mozMatchesSelector) {\n        return function(el, selector) { return el.mozMatchesSelector(selector); };\n    }\n    if (p.msMatchesSelector) {\n        return function(el, selector) { return el.msMatchesSelector(selector); };\n    }\n    return function(s) {\n\treturn [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n    };\n})(Element.prototype);\n\nfunction closest(el, selector) {\n    if (el.closest) {\n        return el.closest(selector);\n    }\n    // IE: stringifying rather than simply comparing with `document`,\n    // which is not iframe-proof and fails in editor export â€”\n    // https://github.com/telerik/kendo/issues/6721\n    while (el && !/^\\[object (?:HTML)?Document\\]$/.test(String(el))) {\n        if (matches(el, selector)) {\n            return el;\n        }\n        el = el.parentNode;\n    }\n}\n\n// clone nodes ourselves, so that we redraw <canvas> (DOM or\n// jQuery clone will not)\nvar cloneNodes = (function($){\n    if ($) {\n        // if we have Kendo and jQuery, use this version as it will\n        // maintain proper links between cloned element and Kendo\n        // widgets (i.e. it clones jQuery data(), which isn't the same\n        // as element's data attributes).\n        // https://github.com/telerik/kendo-ui-core/issues/2750\n        return function cloneNodes(el) {\n            var clone = el.cloneNode(false);\n            if (el.nodeType == 1 /* Element */) {\n                var $el = $(el), $clone = $(clone), i;\n                var data = $el.data();\n                for (i in data) {\n                    $clone.data(i, data[i]);\n                }\n                if (/^canvas$/i.test(el.tagName)) {\n                    clone.getContext(\"2d\").drawImage(el, 0, 0);\n                } else if (/^(?:input|select|textarea|option)$/i.test(el.tagName)) {\n                    // drop the name attributes so that we don't affect the selection of the\n                    // original nodes (i.e. checked status of radio buttons) when we insert our copy\n                    // into the DOM.  https://github.com/telerik/kendo/issues/5409\n                    clone.removeAttribute(\"id\");\n                    clone.removeAttribute(\"name\");\n                    clone.value = el.value;\n                    clone.checked = el.checked;\n                    clone.selected = el.selected;\n                }\n                for (i = el.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(cloneNodes(i));\n                }\n            }\n            return clone;\n        };\n    } else {\n        // the no-jQuery version\n        return function cloneNodes(el) {\n            const clone = (function dive(node){\n                const clone = node.cloneNode(false);\n                if (node._kendoExportVisual) {\n                    clone._kendoExportVisual = node._kendoExportVisual;\n                }\n                for (let i = node.firstChild; i; i = i.nextSibling) {\n                    clone.appendChild(dive(i));\n                }\n                return clone;\n            })(el);\n\n            // re-draw canvases - https://github.com/telerik/kendo/issues/4872\n            const canvases = el.querySelectorAll(\"canvas\");\n            if (canvases.length) {\n                slice(clone.querySelectorAll(\"canvas\")).forEach((canvas, i) => {\n                    canvas.getContext(\"2d\").drawImage(canvases[i], 0, 0);\n                });\n            }\n\n            // remove \"name\" attributes from <input> elements -\n            // https://github.com/telerik/kendo/issues/5409\n            const orig = el.querySelectorAll(\"input, select, textarea, option\");\n            slice(clone.querySelectorAll(\"input, select, textarea, option\")).forEach((el, i) => {\n                el.removeAttribute(\"id\");\n                el.removeAttribute(\"name\");\n                el.value = orig[i].value;\n                el.checked = orig[i].checked;\n                el.selected = orig[i].selected;\n            });\n\n            return clone;\n        };\n    }\n})(typeof window !== \"undefined\" && window.kendo && window.kendo.jQuery);\n\nfunction getXY(thing) {\n    if (typeof thing == \"number\") {\n        return { x: thing, y: thing };\n    }\n    if (Array.isArray(thing)) {\n        return { x: thing[0], y: thing[1] };\n    }\n    return { x: thing.x, y: thing.y };\n}\n\nfunction drawDOM(element, options) {\n    if (!options) {\n        options = {};\n    }\n    var promise = createPromise();\n\n    if (!element) {\n        return promise.reject(\"No element to export\");\n    }\n\n    if (typeof window.getComputedStyle != \"function\") {\n        throw new Error(\"window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.\");\n    }\n\n    PDF.defineFont(getFontFaces(element.ownerDocument));\n\n    var scale = getXY(options.scale || 1);\n\n    function doOne(element) {\n        var group = new Group();\n\n        // translate to start of page\n        var pos = element.getBoundingClientRect();\n        setTransform(group, [\n            scale.x,\n            0,\n            0,\n            scale.y,\n            (-pos.left * scale.x),\n            (-pos.top * scale.y)\n        ]);\n\n        nodeInfo._clipbox = false;\n        nodeInfo._matrix = geo.Matrix.unit();\n        nodeInfo._stackingContext = {\n            element: element,\n            group: group\n        };\n\n        if (options.avoidLinks === true) {\n            nodeInfo._avoidLinks = \"a\";\n        } else {\n            nodeInfo._avoidLinks = options.avoidLinks;\n        }\n\n        addClass(element, \"k-pdf-export\");\n        renderElement(element, group);\n        removeClass(element, \"k-pdf-export\");\n\n        return group;\n    }\n\n    cacheImages(element, function(){\n        var forceBreak = options && options.forcePageBreak;\n        var hasPaperSize = options && options.paperSize && options.paperSize != \"auto\";\n        var paperOptions = PDF.getPaperOptions(function(key, def){\n            if (key == \"paperSize\") {\n                // PDF.getPaperOptions croaks on \"auto\", just pass dummy A4 as we might\n                // still be interested in margins.\n                return hasPaperSize ? options[key] : \"A4\";\n            }\n            return key in options ? options[key] : def;\n        });\n        var pageWidth = hasPaperSize && paperOptions.paperSize[0];\n        var pageHeight = hasPaperSize && paperOptions.paperSize[1];\n        var margin = options.margin && paperOptions.margin;\n        var hasMargin = Boolean(margin);\n        if (forceBreak || pageHeight) {\n            if (!margin) {\n                margin = { left: 0, top: 0, right: 0, bottom: 0 };\n            }\n\n            // we want paper size and margin to be unaffected by\n            // scaling in the output, so we have to reverse-scale\n            // before our calculations begin.\n            if (pageWidth)  { pageWidth  /= scale.x; }\n            if (pageHeight) { pageHeight /= scale.y; }\n            margin.left   /= scale.x;\n            margin.right  /= scale.x;\n            margin.top    /= scale.y;\n            margin.bottom /= scale.y;\n\n            var group = new Group({\n                pdf: {\n                    multiPage     : true,\n                    paperSize     : hasPaperSize ? paperOptions.paperSize : \"auto\",\n                    _ignoreMargin : hasMargin // HACK!  see exportPDF in pdf/drawing.js\n                }\n            });\n            handlePageBreaks(\n                function(x) {\n                    if (options.progress) {\n                        var canceled = false, pageNum = 0;\n                        (function next(){\n                            if (pageNum < x.pages.length) {\n                                var page = doOne(x.pages[pageNum]);\n                                group.append(page);\n                                options.progress({\n                                    page: page,\n                                    pageNum: ++pageNum,\n                                    totalPages: x.pages.length,\n                                    cancel: function() {\n                                        canceled = true;\n                                    }\n                                });\n                                if (!canceled) {\n                                    setTimeout(next);\n                                } else {\n                                    // XXX: should we also fail() the deferred object?\n                                    x.container.parentNode.removeChild(x.container);\n                                }\n                            } else {\n                                x.container.parentNode.removeChild(x.container);\n                                promise.resolve(group);\n                            }\n                        })();\n                    } else {\n                        x.pages.forEach(function(page){\n                            group.append(doOne(page));\n                        });\n                        x.container.parentNode.removeChild(x.container);\n                        promise.resolve(group);\n                    }\n                },\n                element,\n                forceBreak,\n                pageWidth ? pageWidth - margin.left - margin.right : null,\n                pageHeight ? pageHeight - margin.top - margin.bottom : null,\n                margin,\n                options\n            );\n        } else {\n            promise.resolve(doOne(element));\n        }\n    });\n\n    function makeTemplate(template) {\n        if (template != null) {\n            if (typeof template == \"string\") {\n                template = compileTemplate(template.replace(/^\\s+|\\s+$/g, \"\"));\n            }\n            if (typeof template == \"function\") {\n                return function(data) {\n                    var el = template(data);\n                    if (el && typeof el == \"string\") {\n                        var div = document.createElement(\"div\");\n                        div.innerHTML = el;\n                        el = div.firstElementChild;\n                    }\n                    return el;\n                };\n            }\n            // assumed DOM element\n            return function() {\n                return template.cloneNode(true);\n            };\n        }\n    }\n\n    function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\n        var template = makeTemplate(options.template);\n        var doc = element.ownerDocument;\n        var pages = [];\n        var copy = options._destructive ? element : cloneNodes(element);\n        var container = doc.createElement(\"KENDO-PDF-DOCUMENT\");\n        var adjust = 0;\n\n        // make sure <tfoot> elements are at the end (Grid widget\n        // places TFOOT before TBODY, tricking our algorithm to\n        // insert a page break right after the header).\n        // https://github.com/telerik/kendo/issues/4699\n        slice(copy.querySelectorAll(\"tfoot\")).forEach(function(tfoot){\n            tfoot.parentNode.appendChild(tfoot);\n        });\n\n        // remember the index of each LI from an ordered list.\n        // we'll use it to reconstruct the proper numbering.\n        slice(copy.querySelectorAll(\"ol\")).forEach(function(ol){\n            slice(ol.children).forEach(function(li, index){\n                li.setAttribute(\"kendo-split-index\", index);\n            });\n        });\n\n        setCSS(container, {\n            display   : \"block\",\n            position  : \"absolute\",\n            boxSizing : \"content-box\",\n            left      : \"-10000px\",\n            top       : \"-10000px\"\n        });\n\n        if (pageWidth) {\n            // subtle: if we don't set the width *and* margins here, the layout in this\n            // container will be different from the one in our final page elements, and we'll\n            // split at the wrong places.\n            setCSS(container, {\n                width        : pageWidth + \"px\",\n                paddingLeft  : margin.left + \"px\",\n                paddingRight : margin.right + \"px\"\n            });\n\n            // when the first element has a margin-top (i.e. a <h1>) the page will be\n            // inadvertently enlarged by that number (the browser will report the container's\n            // bounding box top to start at the element's top, rather than including its\n            // margin).  Adding overflow: hidden seems to fix it.\n            //\n            // to understand the difference, try the following snippets in your browser:\n            //\n            // 1. <div style=\"background: yellow\">\n            //      <h1 style=\"margin: 3em\">Foo</h1>\n            //    </div>\n            //\n            // 2. <div style=\"background: yellow; overflow: hidden\">\n            //      <h1 style=\"margin: 3em\">Foo</h1>\n            //    </div>\n            //\n            // this detail is not important when automatic page breaking is not requested, hence\n            // doing it only if pageWidth is defined.\n            setCSS(copy, { overflow: \"hidden\" });\n        }\n\n        element.parentNode.insertBefore(container, element);\n        container.appendChild(copy);\n\n        // we need the timeouts here, so that images dimensions are\n        // properly computed in DOM when we start our thing.\n        if (options.beforePageBreak) {\n            setTimeout(function(){\n                options.beforePageBreak(container, doPageBreak);\n            }, 15);\n        } else {\n            setTimeout(doPageBreak, 15);\n        }\n\n        function doPageBreak() {\n            if (forceBreak != \"-\" || pageHeight) {\n                splitElement(copy);\n            }\n\n            {\n                let page = makePage();\n                copy.parentNode.insertBefore(page, copy);\n                page.appendChild(copy);\n            }\n\n            if (template) {\n                pages.forEach(function(page, i){\n                    const el = template({\n                        element    : page,\n                        pageNum    : i + 1,\n                        totalPages : pages.length\n                    });\n                    if (el) {\n                        page.appendChild(el);\n                    }\n                });\n            }\n\n            cacheImages(pages, function() {\n                // Even though we already cached images, they simply won't be available\n                // immediately in the newly created DOM.  Previously we'd allow a 10ms timeout,\n                // but that's arbitrary and clearly not working in all cases\n                // (https://github.com/telerik/kendo/issues/5399), so this function will wait\n                // for their .complete attribute.\n                whenImagesAreActuallyLoaded(pages, function(){\n                    callback({ pages: pages, container: container });\n                });\n            });\n        }\n\n        function keepTogether(el) {\n            if (options.keepTogether && matches(el, options.keepTogether) && el.offsetHeight <= pageHeight - adjust) {\n                return true;\n            }\n\n            var tag = el.tagName;\n            if (/^h[1-6]$/i.test(tag) && el.offsetHeight >= pageHeight - adjust) {\n                return false;\n            }\n\n            return (el.getAttribute(\"data-kendo-chart\") ||\n                    /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(el.tagName));\n        }\n\n        function splitElement(element) {\n            if (element.tagName == \"TABLE\") {\n                setCSS(element, { tableLayout: \"fixed\" });\n            }\n            var style = getComputedStyle(element);\n            var bottomPadding = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n            var bottomBorder = parseFloat(getPropertyValue(style, \"border-bottom-width\"));\n            var saveAdjust = adjust;\n            adjust += bottomPadding + bottomBorder;\n            var isFirst = true;\n            for (var el = element.firstChild; el; el = el.nextSibling) {\n                if (el.nodeType == 1 /* Element */) {\n                    isFirst = false;\n                    if (matches(el, forceBreak)) {\n                        breakAtElement(el);\n                        continue;\n                    }\n                    if (!pageHeight) {\n                        // we're in \"manual breaks mode\"\n                        splitElement(el);\n                        continue;\n                    }\n                    if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle(el), \"position\"))) {\n                        continue;\n                    }\n                    var fall = fallsOnMargin(el);\n                    if (fall == 1) {\n                        // element starts on next page, break before anyway.\n                        breakAtElement(el);\n                    }\n                    else if (fall) {\n                        // elements ends up on next page, or possibly doesn't fit on a page at\n                        // all.  break before it anyway if it's an <img> or <tr>, otherwise\n                        // attempt to split.\n                        if (keepTogether(el)) {\n                            breakAtElement(el);\n                        } else {\n                            splitElement(el);\n                        }\n                    }\n                    else {\n                        splitElement(el);\n                    }\n                }\n                else if (el.nodeType == 3 /* Text */ && pageHeight) {\n                    splitText(el, isFirst);\n                    isFirst = false;\n                }\n            }\n            adjust = saveAdjust;\n        }\n\n        function firstInParent(el) {\n            var p = el.parentNode, first = p.firstChild;\n            if (el === first) {\n                return true;\n            }\n            if (el === p.children[0]) {\n                if (first.nodeType == 7 /* comment */ ||\n                    first.nodeType == 8 /* processing instruction */) {\n                    return true;\n                }\n                if (first.nodeType == 3 /* text */) {\n                    // if whitespace only we can probably consider it's first\n                    return !/\\S/.test(first.data);\n                }\n            }\n            return false;\n        }\n\n        function breakAtElement(el) {\n            if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\n                return breakAtElement(el.parentNode);\n            }\n            var table, colgroup, thead, grid, gridHead;\n            table = closest(el, \"table\");\n            colgroup = table && table.querySelector(\"colgroup\");\n            if (options.repeatHeaders) {\n                thead = table && table.querySelector(\"thead\");\n\n                // If we break page in a Kendo Grid, repeat its header.  This ugly hack is\n                // necessary because a scrollable grid will keep the header in a separate\n                // <table> element from its content.\n                //\n                // XXX: This is likely to break as soon as the widget HTML is modified.\n                grid = closest(el, \".k-grid.k-widget\");\n                if (grid && grid.querySelector(\".k-auto-scrollable\")) {\n                    gridHead = grid.querySelector(\".k-grid-header\");\n                }\n            }\n            var page = makePage();\n            var range = doc.createRange();\n            range.setStartBefore(copy);\n            range.setEndBefore(el);\n            page.appendChild(range.extractContents());\n            copy.parentNode.insertBefore(page, copy);\n            preventBulletOnListItem(el.parentNode);\n            if (table) {\n                table = closest(el, \"table\"); // that's the <table> on next page!\n                if (options.repeatHeaders && thead) {\n                    table.insertBefore(thead.cloneNode(true), table.firstChild);\n                }\n                if (colgroup) {\n                    table.insertBefore(colgroup.cloneNode(true), table.firstChild);\n                }\n            }\n            if (options.repeatHeaders && gridHead) {\n                grid = closest(el, \".k-grid.k-widget\");\n                grid.insertBefore(gridHead.cloneNode(true), grid.firstChild);\n            }\n        }\n\n        function makePage() {\n            var page = doc.createElement(\"KENDO-PDF-PAGE\");\n            setCSS(page, {\n                display  : \"block\",\n                boxSizing: \"content-box\",\n                width    : pageWidth ? (pageWidth + \"px\") : \"auto\",\n                padding  : (margin.top + \"px \" +\n                            margin.right + \"px \" +\n                            margin.bottom + \"px \" +\n                            margin.left + \"px\"),\n\n                // allow absolutely positioned elements to be relative to current page\n                position : \"relative\",\n\n                // without the following we might affect layout of subsequent pages\n                height   : pageHeight ? (pageHeight + \"px\") : \"auto\",\n                overflow : pageHeight || pageWidth ? \"hidden\" : \"visible\",\n                clear    : \"both\"\n            });\n\n            // debug\n            // $(\"<div>\").css({\n            //     position  : \"absolute\",\n            //     left      : margin.left,\n            //     top       : margin.top,\n            //     width     : pageWidth,\n            //     height    : pageHeight,\n            //     boxSizing : \"border-box\",\n            //     background: \"rgba(255, 255, 0, 0.5)\"\n            //     //border    : \"1px solid red\"\n            // }).appendTo(page);\n\n            if (options && options.pageClassName) {\n                page.className = options.pageClassName;\n            }\n            pages.push(page);\n            return page;\n        }\n\n        function fallsOnMargin(thing) {\n            var box = thing.getBoundingClientRect();\n            if (box.width === 0 || box.height === 0) {\n                // I'd say an element with dimensions zero fits on current page.\n                return 0;\n            }\n            var top = copy.getBoundingClientRect().top;\n            var available = pageHeight - adjust;\n            return (box.height > available) ? 3\n                : (box.top - top > available) ? 1\n                : (box.bottom - top > available) ? 2\n                : 0;\n        }\n\n        function splitText(node, isFirst) {\n            if (!/\\S/.test(node.data)) {\n                return;\n            }\n\n            var len = node.data.length;\n            var range = doc.createRange();\n            range.selectNodeContents(node);\n            var fall = fallsOnMargin(range);\n            if (!fall) {\n                return;     // the whole text fits on current page\n            }\n\n            var nextnode = node;\n            if (fall == 1) {\n                // starts on next page, break before anyway.\n                if (isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                } else {\n                    breakAtElement(node);\n                }\n            }\n            else {\n                (function findEOP(min, pos, max) {\n                    range.setEnd(node, pos);\n                    if (min == pos || pos == max) {\n                        return pos;\n                    }\n                    if (fallsOnMargin(range)) {\n                        return findEOP(min, (min + pos) >> 1, pos);\n                    } else {\n                        return findEOP(pos, (pos + max) >> 1, max);\n                    }\n                })(0, len >> 1, len);\n\n                if (!/\\S/.test(range.toString()) && isFirst) {\n                    // avoid leaving an empty <p>, <li>, etc. on previous page.\n                    breakAtElement(node.parentNode);\n                } else {\n                    // This is only needed for IE, but it feels cleaner to do it anyway.  Without\n                    // it, IE will truncate a very long text (playground/pdf-long-text-2.html).\n                    nextnode = node.splitText(range.endOffset);\n\n                    var page = makePage();\n                    range.setStartBefore(copy);\n                    page.appendChild(range.extractContents());\n                    copy.parentNode.insertBefore(page, copy);\n                    preventBulletOnListItem(nextnode.parentNode);\n                }\n            }\n\n            splitText(nextnode);\n        }\n\n        function preventBulletOnListItem(el) {\n            // set a hint on continued LI elements, to tell the\n            // renderer not to draw the bullet again.\n            // https://github.com/telerik/kendo-ui-core/issues/2732\n            var li = closest(el, \"li\");\n            if (li) {\n                li.setAttribute(\"kendo-no-bullet\", \"1\");\n                preventBulletOnListItem(li.parentNode);\n            }\n        }\n    }\n\n    return promise;\n}\n\ndrawDOM.getFontFaces = getFontFaces;\n\n// This is needed for the Spreadsheet print functionality.  Since\n// there we only need to draw text, this cuts through the ceremony\n// of drawDOM/renderElement and renders the text node directly.\ndrawDOM.drawText = function(element) {\n    var group = new Group();\n    nodeInfo._clipbox = false;\n    nodeInfo._matrix = geo.Matrix.unit();\n    nodeInfo._stackingContext = {\n        element: element,\n        group: group\n    };\n    pushNodeInfo(element, getComputedStyle(element), group);\n    if (element.firstChild.nodeType == 3 /* Text */) {\n        // avoid the penalty of renderElement\n        renderText(element, element.firstChild, group);\n    } else {\n        _renderElement(element, group);\n    }\n    popNodeInfo();\n    return group;\n};\n\nvar parseBackgroundImage = (function(){\n    var tok_linear_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/;\n    //var tok_radial_gradient  = /^((-webkit-|-moz-|-o-|-ms-)?radial-gradient\\s*)\\(/;\n    var tok_percent          = /^([-0-9.]+%)/;\n    var tok_length           = /^([-0-9.]+px)/;\n    var tok_keyword          = /^(left|right|top|bottom|to|center)\\W/;\n    var tok_angle            = /^([-0-9.]+(deg|grad|rad|turn))/;\n    var tok_whitespace       = /^(\\s+)/;\n    var tok_popen            = /^(\\()/;\n    var tok_pclose           = /^(\\))/;\n    var tok_comma            = /^(,)/;\n    var tok_url              = /^(url)\\(/;\n    var tok_content          = /^(.*?)\\)/;\n\n    var cache1 = {}, cache2 = {};\n\n    function parse(input) {\n        var orig = input;\n        if (hasOwnProperty(cache1, orig)) {\n            return cache1[orig];\n        }\n        function skip_ws() {\n            var m = tok_whitespace.exec(input);\n            if (m) {\n                input = input.substr(m[1].length);\n            }\n        }\n        function read(token) {\n            skip_ws();\n            var m = token.exec(input);\n            if (m) {\n                input = input.substr(m[1].length);\n                return m[1];\n            }\n        }\n\n        function read_stop() {\n            var color = utils_parseColor(input, true);\n            var length, percent;\n            if (color) {\n                let match =\n                    /^#[0-9a-f]+/i.exec(input) ||\n                    /^rgba?\\(.*?\\)/i.exec(input) ||\n                    /^..*?\\b/.exec(input); // maybe named color\n                input = input.substr(match[0].length);\n                color = color.toRGB();\n                if (!(length = read(tok_length))) {\n                    percent = read(tok_percent);\n                }\n                return { color: color, length: length, percent: percent };\n            }\n        }\n\n        function read_linear_gradient(propName) {\n            var angle;\n            var to1, to2;\n            var stops = [];\n            var reverse = false;\n\n            if (read(tok_popen)) {\n                // 1. [ <angle> || to <side-or-corner>, ]?\n                angle = read(tok_angle);\n                if (angle) {\n                    angle = parseAngle(angle);\n                    read(tok_comma);\n                }\n                else {\n                    to1 = read(tok_keyword);\n                    if (to1 == \"to\") {\n                        to1 = read(tok_keyword);\n                    } else if (to1 && /^-/.test(propName)) {\n                        reverse = true;\n                    }\n                    to2 = read(tok_keyword);\n                    read(tok_comma);\n                }\n\n                if (/-moz-/.test(propName) && angle == null && to1 == null) {\n                    var x = read(tok_percent), y = read(tok_percent);\n                    reverse = true;\n                    if (x == \"0%\") {\n                        to1 = \"left\";\n                    } else if (x == \"100%\") {\n                        to1 = \"right\";\n                    }\n                    if (y == \"0%\") {\n                        to2 = \"top\";\n                    } else if (y == \"100%\") {\n                        to2 = \"bottom\";\n                    }\n                    read(tok_comma);\n                }\n\n                // 2. color stops\n                while (input && !read(tok_pclose)) {\n                    var stop = read_stop();\n                    if (!stop) {\n                        break;\n                    }\n                    stops.push(stop);\n                    read(tok_comma);\n                }\n\n                return {\n                    type    : \"linear\",\n                    angle   : angle,\n                    to      : to1 && to2 ? to1 + \" \" + to2 : to1 ? to1 : to2 ? to2 : null,\n                    stops   : stops,\n                    reverse : reverse\n                };\n            }\n        }\n\n        function read_url() {\n            if (read(tok_popen)) {\n                var url = read(tok_content);\n                url = url.replace(/^['\"]+|[\"']+$/g, \"\");\n                read(tok_pclose);\n                return { type: \"url\", url: url };\n            }\n        }\n\n        var tok;\n\n        if ((tok = read(tok_linear_gradient))) {\n            tok = read_linear_gradient(tok);\n        }\n        else if ((tok = read(tok_url))) {\n            tok = read_url();\n        }\n\n        return (cache1[orig] = tok || { type: \"none\" });\n    }\n\n    return function(input) {\n        if (hasOwnProperty(cache2, input)) {\n            return cache2[input];\n        }\n        return (cache2[input] = splitProperty(input).map(parse));\n    };\n})();\n\nvar splitProperty = (function(){\n    var cache = {};\n    return function(input, separator) {\n        if (!separator) {\n            separator = /^\\s*,\\s*/;\n        }\n\n        var cacheKey = input + separator;\n\n        if (hasOwnProperty(cache, cacheKey)) {\n            return cache[cacheKey];\n        }\n\n        var ret = [];\n        var last = 0, pos = 0;\n        var in_paren = 0;\n        var in_string = false;\n        var m;\n\n        function looking_at(rx) {\n            return (m = rx.exec(input.substr(pos)));\n        }\n\n        function trim(str) {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n\n        while (pos < input.length) {\n            if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\n                in_paren++;\n                pos++;\n            }\n            else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\n                in_paren--;\n                pos++;\n            }\n            else if (!in_string && looking_at(/^[\\\"\\']/)) {\n                in_string = m[0];\n                pos++;\n            }\n            else if (in_string == \"'\" && looking_at(/^\\\\\\'/)) {\n                pos += 2;\n            }\n            else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\n                pos += 2;\n            }\n            else if (in_string == \"'\" && looking_at(/^\\'/)) {\n                in_string = false;\n                pos++;\n            }\n            else if (in_string == '\"' && looking_at(/^\\\"/)) {\n                in_string = false;\n                pos++;\n            }\n            else if (looking_at(separator)) {\n                if (!in_string && !in_paren && pos > last) {\n                    ret.push(trim(input.substring(last, pos)));\n                    last = pos + m[0].length;\n                }\n                pos += m[0].length;\n            }\n            else {\n                pos++;\n            }\n        }\n        if (last < pos) {\n            ret.push(trim(input.substring(last, pos)));\n        }\n        return (cache[cacheKey] = ret);\n    };\n})();\n\nvar getFontURL = (function(cache){\n    return function(el){\n        // XXX: for IE we get here the whole cssText of the rule,\n        // because the computedStyle.src is empty.  Next time we need\n        // to fix these regexps we better write a CSS parser. :-\\\n        var url = cache[el];\n        if (!url) {\n            var m;\n            if ((m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el))) {\n                url = cache[el] = m[2];\n            } else if ((m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el))) {\n                url = cache[el] = m[2];\n            }\n        }\n        return url;\n    };\n})(Object.create(null));\n\nvar getFontHeight = (function(cache){\n    return function(font) {\n        var height = cache[font];\n        if (height == null) {\n            height = cache[font] = measureText(\"Mapq\", { font: font }).height;\n        }\n        return height;\n    };\n})(Object.create(null));\n\nfunction getFontFaces(doc) {\n    if (doc == null) {\n        doc = document;\n    }\n    var result = {};\n    for (var i = 0; i < doc.styleSheets.length; ++i) {\n        doStylesheet(doc.styleSheets[i]);\n    }\n    return result;\n    function doStylesheet(ss) {\n        if (ss) {\n            var rules = null;\n            try {\n                rules = ss.cssRules;\n            } catch (ex) {}\n            if (rules) {\n                addRules(ss, rules);\n            }\n        }\n    }\n    function findFonts(rule) {\n        var src = getPropertyValue(rule.style, \"src\");\n        if (src) {\n            return splitProperty(src).reduce(function(a, el){\n                var font = getFontURL(el);\n                if (font) {\n                    a.push(font);\n                }\n                return a;\n            }, []);\n        } else {\n            // Internet Explorer\n            // XXX: this is gross.  should work though for valid CSS.\n            var font = getFontURL(rule.cssText);\n            return font ? [ font ] : [];\n        }\n    }\n    function addRules(styleSheet, rules) {\n        for (var i = 0; i < rules.length; ++i) {\n            var r = rules[i];\n            switch (r.type) {\n              case 3:       // CSSImportRule\n                doStylesheet(r.styleSheet);\n                break;\n              case 5:       // CSSFontFaceRule\n                var style  = r.style;\n                var family = splitProperty(getPropertyValue(style, \"font-family\"));\n                var bold   = /^([56789]00|bold)$/i.test(getPropertyValue(style, \"font-weight\"));\n                var italic = \"italic\" == getPropertyValue(style, \"font-style\");\n                var src    = findFonts(r);\n                if (src.length > 0) {\n                    addRule(styleSheet, family, bold, italic, src[0]);\n                }\n            }\n        }\n    }\n    function addRule(styleSheet, names, bold, italic, url) {\n        // We get full resolved absolute URLs in Chrome, but sadly\n        // not in Firefox.\n        if (!(/^data:/i.test(url))) {\n            if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\n                url = String(styleSheet.href).replace(/[^\\/]*$/, \"\") + url;\n            }\n        }\n        names.forEach(function(name){\n            name = name.replace(/^(['\"]?)(.*?)\\1$/, \"$2\"); // it's quoted\n            if (bold) {\n                name += \"|bold\";\n            }\n            if (italic) {\n                name += \"|italic\";\n            }\n            result[name] = url;\n        });\n    }\n}\n\nfunction hasOwnProperty(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nfunction getCounter(name) {\n    name = \"_counter_\" + name;\n    return nodeInfo[name];\n}\n\nfunction getAllCounters(name) {\n    var values = [], p = nodeInfo;\n    name = \"_counter_\" + name;\n    while (p) {\n        if (hasOwnProperty(p, name)) {\n            values.push(p[name]);\n        }\n        p = Object.getPrototypeOf(p);\n    }\n    return values.reverse();\n}\n\nfunction incCounter(name, inc) {\n    var p = nodeInfo;\n    name = \"_counter_\" + name;\n    while (p && !hasOwnProperty(p, name)) {\n        p = Object.getPrototypeOf(p);\n    }\n    if (!p) {\n        p = nodeInfo._root;\n    }\n    p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\n}\n\nfunction resetCounter(name, val) {\n    name = \"_counter_\" + name;\n    nodeInfo[name] = val == null ? 0 : val;\n}\n\nfunction doCounters(a, f, def) {\n    for (var i = 0; i < a.length;) {\n        var name = a[i++];\n        var val = parseFloat(a[i]);\n        if (isNaN(val)) {\n            f(name, def);\n        } else {\n            f(name, val);\n            ++i;\n        }\n    }\n}\n\nfunction updateCounters(style) {\n    var counterReset = getPropertyValue(style, \"counter-reset\");\n    if (counterReset) {\n        doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\n    }\n    var counterIncrement = getPropertyValue(style, \"counter-increment\");\n    if (counterIncrement) {\n        doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\n    }\n}\n\nfunction parseColor(str, css) {\n    var color = utils_parseColor(str, true);\n    if (color) {\n        color = color.toRGB();\n        if (css) {\n            color = color.toCssRgba();\n        } else if (color.a === 0) {\n            color = null;\n        }\n    }\n    return color;\n}\n\nfunction whenImagesAreActuallyLoaded(elements, callback) {\n    var pending = 0;\n    elements.forEach(function(el){\n        var images = el.querySelectorAll(\"img\");\n        for (var i = 0; i < images.length; ++i) {\n            var img = images[i];\n            if (!img.complete) {\n                pending++;\n                img.onload = img.onerror = next;\n            }\n        }\n    });\n    if (!pending) {\n        next();\n    }\n    function next() {\n        if (--pending <= 0) {\n            callback();\n        }\n    }\n}\n\nfunction cacheImages(element, callback) {\n    var urls = [];\n    function add(url) {\n        if (!IMAGE_CACHE[url]) {\n            IMAGE_CACHE[url] = true;\n            urls.push(url);\n        }\n    }\n    function dive(element){\n        if (/^img$/i.test(element.tagName)) {\n            add(element.src);\n        }\n        parseBackgroundImage(\n            getPropertyValue(\n                getComputedStyle(element), \"background-image\"\n            )\n        ).forEach(function(bg){\n            if (bg.type == \"url\") {\n                add(bg.url);\n            }\n        });\n\n        if (element.children) {\n            slice(element.children).forEach(dive);\n        }\n    }\n\n    if (Array.isArray(element)) {\n        element.forEach(dive);\n    } else {\n        dive(element);\n    }\n\n    var count = urls.length;\n    function next() {\n        if (--count <= 0) {\n            callback();\n        }\n    }\n    if (count === 0) {\n        next();\n    }\n    urls.forEach(function(url){\n        var img = IMAGE_CACHE[url] = new window.Image();\n        if (!(/^data:/i.test(url))) {\n            img.crossOrigin = \"Anonymous\";\n        }\n        img.src = url;\n        if (img.complete) {\n            next();\n        } else {\n            img.onload = next;\n            img.onerror = function() {\n                IMAGE_CACHE[url] = null;\n                next();\n            };\n        }\n    });\n}\n\nfunction alphaNumeral(n) {\n    var result = \"\";\n    do {\n        var r = n % 26;\n        result = String.fromCharCode(97 + r) + result;\n        n = Math.floor(n / 26);\n    } while (n > 0);\n    return result;\n}\n\nfunction pushNodeInfo(element, style, group) {\n    nodeInfo = Object.create(nodeInfo);\n    nodeInfo[element.tagName.toLowerCase()] = {\n        element: element,\n        style: style\n    };\n    var decoration = getPropertyValue(style, \"text-decoration\");\n    if (decoration && decoration != \"none\") {\n        var color = getPropertyValue(style, \"color\");\n        decoration.split(/\\s+/g).forEach(function(name){\n            if (!nodeInfo[name]) {\n                nodeInfo[name] = color;\n            }\n        });\n    }\n\n    if (createsStackingContext(style)) {\n        nodeInfo._stackingContext = {\n            element: element,\n            group: group\n        };\n    }\n}\n\nfunction popNodeInfo() {\n    nodeInfo = Object.getPrototypeOf(nodeInfo);\n}\n\nfunction updateClipbox(path) {\n    if (nodeInfo._clipbox != null) {\n        var box = path.bbox(nodeInfo._matrix);\n        if (nodeInfo._clipbox) {\n            nodeInfo._clipbox = geo.Rect.intersect(nodeInfo._clipbox, box);\n        } else {\n            nodeInfo._clipbox = box;\n        }\n    }\n}\n\nfunction emptyClipbox() {\n    var cb = nodeInfo._clipbox;\n    if (cb == null) {\n        return true;\n    }\n    if (cb) {\n        return cb.width() === 0 || cb.height() === 0;\n    }\n}\n\nfunction createsStackingContext(style) {\n    function prop(name) { return getPropertyValue(style, name); }\n    if (prop(\"transform\") != \"none\" ||\n        prop(\"position\") != \"static\" ||\n        prop(\"z-index\") != \"auto\" ||\n        prop(\"opacity\") < 1) {\n        return true;\n    }\n}\n\nfunction getComputedStyle(element, pseudoElt) {\n    return window.getComputedStyle(element, pseudoElt || null);\n}\n\nfunction getPropertyValue(style, prop, defa) {\n    var val = style.getPropertyValue(prop);\n    if (val == null || val === \"\") {\n        if (browser.webkit) {\n            val = style.getPropertyValue(\"-webkit-\" + prop );\n        } else if (browser.mozilla) {\n            val = style.getPropertyValue(\"-moz-\" + prop );\n        } else if (browser.opera) {\n            val = style.getPropertyValue(\"-o-\" + prop);\n        } else if (browser.msie || browser.edge) {\n            val = style.getPropertyValue(\"-ms-\" + prop);\n        }\n    }\n    if (arguments.length > 2 && (val == null || val === \"\")) {\n        return defa;\n    } else {\n        return val;\n    }\n}\n\nfunction pleaseSetPropertyValue(style, prop, value, important) {\n    style.setProperty(prop, value, important);\n    if (browser.webkit) {\n        style.setProperty(\"-webkit-\" + prop, value, important);\n    } else if (browser.mozilla) {\n        style.setProperty(\"-moz-\" + prop, value, important);\n    } else if (browser.opera) {\n        style.setProperty(\"-o-\" + prop, value, important);\n    } else if (browser.msie || browser.edge) {\n        style.setProperty(\"-ms-\" + prop, value, important);\n        prop = \"ms\" + prop.replace(/(^|-)([a-z])/g, function(s, p1, p2){\n            return p1 + p2.toUpperCase();\n        });\n        style[prop] = value;\n    }\n}\n\nfunction getBorder(style, side) {\n    side = \"border-\" + side;\n    return {\n        width: parseFloat(getPropertyValue(style, side + \"-width\")),\n        style: getPropertyValue(style, side + \"-style\"),\n        color: parseColor(getPropertyValue(style, side + \"-color\"), true)\n    };\n}\n\nfunction saveStyle(element, func) {\n    var prev = element.style.cssText;\n    var result = func();\n    element.style.cssText = prev;\n    return result;\n}\n\nfunction getBorderRadius(style, side) {\n    var r = getPropertyValue(style, \"border-\" + side + \"-radius\").split(/\\s+/g).map(parseFloat);\n    if (r.length == 1) {\n        r.push(r[0]);\n    }\n    return sanitizeRadius({ x: r[0], y: r[1] });\n}\n\nfunction getContentBox(element) {\n    var box = element.getBoundingClientRect();\n    box = innerBox(box, \"border-*-width\", element);\n    box = innerBox(box, \"padding-*\", element);\n    return box;\n}\n\nfunction innerBox(box, prop, element) {\n    var style, wt, wr, wb, wl;\n    if (typeof prop == \"string\") {\n        style = getComputedStyle(element);\n        wt = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"top\")));\n        wr = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"right\")));\n        wb = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"bottom\")));\n        wl = parseFloat(getPropertyValue(style, prop.replace(\"*\", \"left\")));\n    }\n    else if (typeof prop == \"number\") {\n        wt = wr = wb = wl = prop;\n    }\n    return {\n        top    : box.top + wt,\n        right  : box.right - wr,\n        bottom : box.bottom - wb,\n        left   : box.left + wl,\n        width  : box.right - box.left - wr - wl,\n        height : box.bottom - box.top - wb - wt\n    };\n}\n\nfunction getTransform(style) {\n    var transform = getPropertyValue(style, \"transform\");\n    if (transform == \"none\") {\n        return null;\n    }\n    var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform);\n    if (matrix) {\n        var origin = getPropertyValue(style, \"transform-origin\");\n        matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\n        origin = origin.split(/\\s+/g).map(parseFloat);\n        return {\n            matrix: matrix,\n            origin: origin\n        };\n    }\n}\n\nfunction radiansToDegrees(radians) {\n    return ((180 * radians) / Math.PI) % 360;\n}\n\nfunction parseAngle(angle) {\n    var num = parseFloat(angle);\n    if (/grad$/.test(angle)) {\n        return Math.PI * num / 200;\n    }\n    else if (/rad$/.test(angle)) {\n        return num;\n    }\n    else if (/turn$/.test(angle)) {\n        return Math.PI * num * 2;\n    }\n    else if (/deg$/.test(angle)) {\n        return Math.PI * num / 180;\n    }\n}\n\nfunction setTransform(shape, m) {\n    m = new geo.Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\n    shape.transform(m);\n    return m;\n}\n\nfunction setClipping(shape, clipPath) {\n    shape.clip(clipPath);\n}\n\nfunction addArcToPath(path, x, y, options) {\n    var points = new geo.Arc([ x, y ], options).curvePoints(), i = 1;\n    while (i < points.length) {\n        path.curveTo(points[i++], points[i++], points[i++]);\n    }\n}\n\nfunction sanitizeRadius(r) {\n    if (r.x <= 0 || r.y <= 0) {\n        r.x = r.y = 0;\n    }\n    return r;\n}\n\nfunction adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\n    // adjust border radiuses such that the sum of adjacent\n    // radiuses is not bigger than the length of the side.\n    // seems the correct algorithm is variant (3) from here:\n    // http://www.w3.org/Style/CSS/Tracker/issues/29?changelog\n    var tl_x = Math.max(0, rTL.x), tl_y = Math.max(0, rTL.y);\n    var tr_x = Math.max(0, rTR.x), tr_y = Math.max(0, rTR.y);\n    var br_x = Math.max(0, rBR.x), br_y = Math.max(0, rBR.y);\n    var bl_x = Math.max(0, rBL.x), bl_y = Math.max(0, rBL.y);\n\n    var f = Math.min(\n        box.width / (tl_x + tr_x),\n        box.height / (tr_y + br_y),\n        box.width / (br_x + bl_x),\n        box.height / (bl_y + tl_y)\n    );\n\n    if (f < 1) {\n        tl_x *= f; tl_y *= f;\n        tr_x *= f; tr_y *= f;\n        br_x *= f; br_y *= f;\n        bl_x *= f; bl_y *= f;\n    }\n\n    return {\n        tl: { x: tl_x, y: tl_y },\n        tr: { x: tr_x, y: tr_y },\n        br: { x: br_x, y: br_y },\n        bl: { x: bl_x, y: bl_y }\n    };\n}\n\nfunction elementRoundBox(element, box, type) {\n    var style = getComputedStyle(element);\n\n    var rTL = getBorderRadius(style, \"top-left\");\n    var rTR = getBorderRadius(style, \"top-right\");\n    var rBL = getBorderRadius(style, \"bottom-left\");\n    var rBR = getBorderRadius(style, \"bottom-right\");\n\n    if (type == \"padding\" || type == \"content\") {\n        var bt = getBorder(style, \"top\");\n        var br = getBorder(style, \"right\");\n        var bb = getBorder(style, \"bottom\");\n        var bl = getBorder(style, \"left\");\n        rTL.x -= bl.width; rTL.y -= bt.width;\n        rTR.x -= br.width; rTR.y -= bt.width;\n        rBR.x -= br.width; rBR.y -= bb.width;\n        rBL.x -= bl.width; rBL.y -= bb.width;\n        if (type == \"content\") {\n            var pt = parseFloat(getPropertyValue(style, \"padding-top\"));\n            var pr = parseFloat(getPropertyValue(style, \"padding-right\"));\n            var pb = parseFloat(getPropertyValue(style, \"padding-bottom\"));\n            var pl = parseFloat(getPropertyValue(style, \"padding-left\"));\n            rTL.x -= pl; rTL.y -= pt;\n            rTR.x -= pr; rTR.y -= pt;\n            rBR.x -= pr; rBR.y -= pb;\n            rBL.x -= pl; rBL.y -= pb;\n        }\n    }\n\n    if (typeof type == \"number\") {\n        rTL.x -= type; rTL.y -= type;\n        rTR.x -= type; rTR.y -= type;\n        rBR.x -= type; rBR.y -= type;\n        rBL.x -= type; rBL.y -= type;\n    }\n\n    return roundBox(box, rTL, rTR, rBR, rBL);\n}\n\n// Create a drawing.Path for a rounded rectangle.  Receives the\n// bounding box and the border-radiuses in CSS order (top-left,\n// top-right, bottom-right, bottom-left).  The radiuses must be\n// objects containing x (horiz. radius) and y (vertical radius).\nfunction roundBox(box, rTL0, rTR0, rBR0, rBL0) {\n    var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n    var rTL = tmp.tl;\n    var rTR = tmp.tr;\n    var rBR = tmp.br;\n    var rBL = tmp.bl;\n    var path = new Path({ fill: null, stroke: null });\n    path.moveTo(box.left, box.top + rTL.y);\n    if (rTL.x) {\n        addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\n            startAngle: -180,\n            endAngle: -90,\n            radiusX: rTL.x,\n            radiusY: rTL.y\n        });\n    }\n    path.lineTo(box.right - rTR.x, box.top);\n    if (rTR.x) {\n        addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\n            startAngle: -90,\n            endAngle: 0,\n            radiusX: rTR.x,\n            radiusY: rTR.y\n        });\n    }\n    path.lineTo(box.right, box.bottom - rBR.y);\n    if (rBR.x) {\n        addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\n            startAngle: 0,\n            endAngle: 90,\n            radiusX: rBR.x,\n            radiusY: rBR.y\n        });\n    }\n    path.lineTo(box.left + rBL.x, box.bottom);\n    if (rBL.x) {\n        addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\n            startAngle: 90,\n            endAngle: 180,\n            radiusX: rBL.x,\n            radiusY: rBL.y\n        });\n    }\n    return path.close();\n}\n\nfunction formatCounter(val, style) {\n    var str = String(parseFloat(val));\n    switch (style) {\n      case \"decimal-leading-zero\":\n        if (str.length < 2) {\n            str = \"0\" + str;\n        }\n        return str;\n      case \"lower-roman\":\n        return arabicToRoman(val).toLowerCase();\n      case \"upper-roman\":\n        return arabicToRoman(val).toUpperCase();\n      case \"lower-latin\":\n      case \"lower-alpha\":\n        return alphaNumeral(val - 1);\n      case \"upper-latin\":\n      case \"upper-alpha\":\n        return alphaNumeral(val - 1).toUpperCase();\n      default:\n        return str;\n    }\n}\n\nfunction evalPseudoElementContent(element, content) {\n    function displayCounter(name, style, separator) {\n        if (!separator) {\n            return formatCounter(getCounter(name) || 0, style);\n        }\n        separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, \"$2\");\n        return getAllCounters(name).map(function(val){\n            return formatCounter(val, style);\n        }).join(separator);\n    }\n    var a = splitProperty(content, /^\\s+/);\n    var result = [], m;\n    a.forEach(function(el){\n        var tmp;\n        if ((m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el))) {\n            result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function(s, p){\n                return String.fromCharCode(parseInt(p, 16));\n            }));\n        }\n        else if ((m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el))) {\n            tmp = splitProperty(m[1]);\n            result.push(displayCounter(tmp[0], tmp[1]));\n        }\n        else if ((m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el))) {\n            tmp = splitProperty(m[1]);\n            result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\n        }\n        else if ((m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el))) {\n            result.push(element.getAttribute(m[1]) || \"\");\n        }\n        else {\n            result.push(el);\n        }\n    });\n    return result.join(\"\");\n}\n\nfunction getCssText(style) {\n    if (style.cssText) {\n        return style.cssText;\n    }\n    // Status: NEW.  Report year: 2002.  Current year: 2014.\n    // Nice played, Mozillians.\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n    var result = [];\n    for (var i = 0; i < style.length; ++i) {\n        result.push(style[i] + \": \" + getPropertyValue(style, style[i]));\n    }\n    return result.join(\";\\n\");\n}\n\nfunction _renderWithPseudoElements(element, group) {\n    if (element.tagName == KENDO_PSEUDO_ELEMENT) {\n        _renderElement(element, group);\n        return;\n    }\n    var fake = [];\n    function pseudo(kind, place) {\n        var style = getComputedStyle(element, kind);\n        updateCounters(style);\n        if (style.content && style.content != \"normal\" && style.content != \"none\" && style.width != \"0px\") {\n            var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n            psel.style.cssText = getCssText(style);\n            psel.textContent = evalPseudoElementContent(element, style.content);\n            element.insertBefore(psel, place);\n            fake.push(psel);\n        }\n    }\n    pseudo(\":before\", element.firstChild);\n    pseudo(\":after\", null);\n    var saveClass = element.className;\n    element.className += \" kendo-pdf-hide-pseudo-elements\";\n    _renderElement(element, group);\n    element.className = saveClass;\n    fake.forEach(function(el){ element.removeChild(el); });\n}\n\nfunction _renderElement(element, group) {\n    var style = getComputedStyle(element);\n\n    var top = getBorder(style, \"top\");\n    var right = getBorder(style, \"right\");\n    var bottom = getBorder(style, \"bottom\");\n    var left = getBorder(style, \"left\");\n\n    var rTL0 = getBorderRadius(style, \"top-left\");\n    var rTR0 = getBorderRadius(style, \"top-right\");\n    var rBL0 = getBorderRadius(style, \"bottom-left\");\n    var rBR0 = getBorderRadius(style, \"bottom-right\");\n\n    var dir = getPropertyValue(style, \"direction\");\n\n    var backgroundColor = getPropertyValue(style, \"background-color\");\n    backgroundColor = parseColor(backgroundColor);\n\n    var backgroundImage = parseBackgroundImage( getPropertyValue(style, \"background-image\") );\n    var backgroundRepeat = splitProperty( getPropertyValue(style, \"background-repeat\") );\n    var backgroundPosition = splitProperty( getPropertyValue(style, \"background-position\") );\n    var backgroundOrigin = splitProperty( getPropertyValue(style, \"background-origin\") );\n    var backgroundSize = splitProperty( getPropertyValue(style, \"background-size\") );\n\n    if (browser.msie && browser.version < 10) {\n        // IE9 hacks.  getPropertyValue won't return the correct\n        // value.  Sucks that we have to do it here, I'd prefer to\n        // move it in getPropertyValue, but we don't have the\n        // element.\n        backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\n    }\n\n    var innerbox = innerBox(element.getBoundingClientRect(), \"border-*-width\", element);\n\n    // CSS \"clip\" property - if present, replace the group with a\n    // new one which is clipped.  This must happen before drawing\n    // the borders and background.\n    (function(){\n        var clip = getPropertyValue(style, \"clip\");\n        var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\n        if (m) {\n            var a = m[1].split(/[ ,]+/g);\n            var top = a[0] == \"auto\" ? innerbox.top : parseFloat(a[0]) + innerbox.top;\n            var right = a[1] == \"auto\" ? innerbox.right : parseFloat(a[1]) + innerbox.left;\n            var bottom = a[2] == \"auto\" ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\n            var left = a[3] == \"auto\" ? innerbox.left : parseFloat(a[3]) + innerbox.left;\n            var tmp = new Group();\n            var clipPath = new Path()\n                .moveTo(left, top)\n                .lineTo(right, top)\n                .lineTo(right, bottom)\n                .lineTo(left, bottom)\n                .close();\n            setClipping(tmp, clipPath);\n            group.append(tmp);\n            group = tmp;\n            updateClipbox(clipPath);\n        }\n    })();\n\n    var boxes, i, cells;\n    var display = getPropertyValue(style, \"display\");\n\n    if (display == \"table-row\") {\n        // because of rowspan/colspan, we shouldn't draw background of table row elements on the\n        // box given by its getBoundingClientRect, because if we do we risk overwritting a\n        // previously rendered cell.  https://github.com/telerik/kendo/issues/4881\n        boxes = [];\n        for (i = 0, cells = element.children; i < cells.length; ++i) {\n            boxes.push(cells[i].getBoundingClientRect());\n        }\n    } else {\n        boxes = element.getClientRects();\n        if (boxes.length == 1) {\n            // Workaround the missing borders in Chrome!  getClientRects() boxes contains values\n            // rounded to integer.  getBoundingClientRect() appears to work fine.  We still need\n            // getClientRects() to support cases where there are more boxes (continued inline\n            // elements that might have border/background).\n            boxes = [ element.getBoundingClientRect() ];\n        }\n    }\n\n    // This function workarounds another Chrome bug, where boxes returned for a table with\n    // border-collapse: collapse will overlap the table border.  Our rendering is not perfect in\n    // such case anyway, but with this is better than without it.\n    boxes = adjustBoxes(boxes);\n\n    for (i = 0; i < boxes.length; ++i) {\n        drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\n    }\n\n    // Render links as separate groups.  We can't use boxes returned by element's getClientRects\n    // because if display type is \"inline\" (default for <a>), boxes will not include the height of\n    // images inside.  https://github.com/telerik/kendo-ui-core/issues/3359\n    if (element.tagName == \"A\" && element.href && !/^#?$/.test(element.getAttribute(\"href\"))) {\n        if (!nodeInfo._avoidLinks || !matches(element, nodeInfo._avoidLinks)) {\n            const r = document.createRange();\n            r.selectNodeContents(element);\n            slice(r.getClientRects()).forEach(function(box){\n                const g = new Group();\n                g._pdfLink = {\n                    url    : element.href,\n                    top    : box.top,\n                    right  : box.right,\n                    bottom : box.bottom,\n                    left   : box.left\n                };\n                group.append(g);\n            });\n        }\n    }\n\n    if (boxes.length > 0 && display == \"list-item\" && !element.getAttribute(\"kendo-no-bullet\")) {\n        drawBullet(boxes[0]);\n    }\n\n    // overflow: hidden/auto - if present, replace the group with\n    // a new one clipped by the inner box.\n    (function(){\n        function clipit() {\n            var clipPath = elementRoundBox(element, innerbox, \"padding\");\n            var tmp = new Group();\n            setClipping(tmp, clipPath);\n            group.append(tmp);\n            group = tmp;\n            updateClipbox(clipPath);\n        }\n        if (isFormField(element)) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow\"))) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-x\"))) {\n            clipit();\n        } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, \"overflow-y\"))) {\n            clipit();\n        }\n    })();\n\n    if (!maybeRenderWidget(element, group)) {\n        renderContents(element, group);\n    }\n\n    return group; // only utility functions after this line.\n\n    function adjustBoxes(boxes) {\n        if (/^td$/i.test(element.tagName)) {\n            var table = nodeInfo.table;\n            if (table && getPropertyValue(table.style, \"border-collapse\") == \"collapse\") {\n                var tableBorderLeft = getBorder(table.style, \"left\").width;\n                var tableBorderTop = getBorder(table.style, \"top\").width;\n                // check if we need to adjust\n                if (tableBorderLeft === 0 && tableBorderTop === 0) {\n                    return boxes; // nope\n                }\n                var tableBox = table.element.getBoundingClientRect();\n                var firstCell = table.element.rows[0].cells[0];\n                var firstCellBox = firstCell.getBoundingClientRect();\n                if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\n                    return slice(boxes).map(function(box){\n                        return {\n                            left   : box.left + tableBorderLeft,\n                            top    : box.top + tableBorderTop,\n                            right  : box.right + tableBorderLeft,\n                            bottom : box.bottom + tableBorderTop,\n                            height : box.height,\n                            width  : box.width\n                        };\n                    });\n                }\n            }\n        }\n        return boxes;\n    }\n\n    // this function will be called to draw each border.  it\n    // draws starting at origin and the resulted path must be\n    // translated/rotated to be placed in the proper position.\n    //\n    // arguments are named as if it draws the top border:\n    //\n    //    - `len` the length of the edge\n    //    - `Wtop` the width of the edge (i.e. border-top-width)\n    //    - `Wleft` the width of the left edge (border-left-width)\n    //    - `Wright` the width of the right edge\n    //    - `rl` and `rl` -- the border radius on the left and right\n    //      (objects containing x and y, for horiz/vertical radius)\n    //    - `transform` -- transformation to apply\n    //\n    function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform) {\n        if (Wtop <= 0) {\n            return;\n        }\n\n        var path, edge = new Group();\n        setTransform(edge, transform);\n        group.append(edge);\n\n        sanitizeRadius(rl);\n        sanitizeRadius(rr);\n\n        // draw main border.  this is the area without the rounded corners\n        path = new Path({\n            fill: { color: color },\n            stroke: null\n        });\n        edge.append(path);\n        path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0)\n            .lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0)\n            .lineTo(len - Math.max(rr.x, Wright), Wtop)\n            .lineTo(Math.max(rl.x, Wleft), Wtop)\n            .close();\n\n        if (rl.x) {\n            drawRoundCorner(Wleft, rl, [ -1, 0, 0, 1, rl.x, 0 ]);\n        }\n\n        if (rr.x) {\n            drawRoundCorner(Wright, rr, [ 1, 0, 0, 1, len - rr.x, 0 ]);\n        }\n\n        // draws one round corner, starting at origin (needs to be\n        // translated/rotated to be placed properly).\n        function drawRoundCorner(Wright, r, transform) {\n            var angle = Math.PI/2 * Wright / (Wright + Wtop);\n\n            // not sanitizing this one, because negative values\n            // are useful to fill the box correctly.\n            var ri = {\n                x: r.x - Wright,\n                y: r.y - Wtop\n            };\n\n            var path = new Path({\n                fill: { color: color },\n                stroke: null\n            }).moveTo(0, 0);\n\n            setTransform(path, transform);\n\n            addArcToPath(path, 0, r.y, {\n                startAngle: -90,\n                endAngle: -radiansToDegrees(angle),\n                radiusX: r.x,\n                radiusY: r.y\n            });\n\n            if (ri.x > 0 && ri.y > 0) {\n                path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\n                addArcToPath(path, 0, r.y, {\n                    startAngle: -radiansToDegrees(angle),\n                    endAngle: -90,\n                    radiusX: ri.x,\n                    radiusY: ri.y,\n                    anticlockwise: true\n                });\n            }\n            else if (ri.x > 0) {\n                path.lineTo(ri.x, Wtop)\n                    .lineTo(0, Wtop);\n            }\n            else {\n                path.lineTo(ri.x, Wtop)\n                    .lineTo(ri.x, 0);\n            }\n\n            edge.append(path.close());\n        }\n    }\n\n    function drawBackground(box) {\n        var background = new Group();\n        setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\n        group.append(background);\n\n        if (backgroundColor) {\n            var path = new Path({\n                fill: { color: backgroundColor.toCssRgba() },\n                stroke: null\n            });\n            path.moveTo(box.left, box.top)\n                .lineTo(box.right, box.top)\n                .lineTo(box.right, box.bottom)\n                .lineTo(box.left, box.bottom)\n                .close();\n            background.append(path);\n        }\n\n        for (var i = backgroundImage.length; --i >= 0;) {\n            drawOneBackground(\n                background, box,\n                backgroundImage[i],\n                backgroundRepeat[i % backgroundRepeat.length],\n                backgroundPosition[i % backgroundPosition.length],\n                backgroundOrigin[i % backgroundOrigin.length],\n                backgroundSize[i % backgroundSize.length]\n            );\n        }\n    }\n\n    function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\n        if (!background || (background == \"none\")) {\n            return;\n        }\n\n        if (background.type == \"url\") {\n            // SVG taints the canvas, can't draw it.\n            if (/^url\\(\\\"data:image\\/svg/i.test(background.url)) {\n                return;\n            }\n            var img = IMAGE_CACHE[background.url];\n            if (img && img.width > 0 && img.height > 0) {\n                drawBackgroundImage(group, box, img.width, img.height, function(group, rect){\n                    group.append(new Image(background.url, rect));\n                });\n            }\n        } else if (background.type == \"linear\") {\n            drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\n        } else {\n            return;\n        }\n\n        function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\n            var aspect_ratio = img_width / img_height, f;\n\n            // for background-origin: border-box the box is already appropriate\n            var orgBox = box;\n            if (backgroundOrigin == \"content-box\") {\n                orgBox = innerBox(orgBox, \"border-*-width\", element);\n                orgBox = innerBox(orgBox, \"padding-*\", element);\n            } else if (backgroundOrigin == \"padding-box\") {\n                orgBox = innerBox(orgBox, \"border-*-width\", element);\n            }\n\n            if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\n                if (backgroundSize == \"contain\") {\n                    f = Math.min(orgBox.width / img_width,\n                                 orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                }\n                else if (backgroundSize == \"cover\") {\n                    f = Math.max(orgBox.width / img_width,\n                                 orgBox.height / img_height);\n                    img_width *= f;\n                    img_height *= f;\n                }\n                else {\n                    var size = backgroundSize.split(/\\s+/g);\n                    // compute width\n                    if (/%$/.test(size[0])) {\n                        img_width = orgBox.width * parseFloat(size[0]) / 100;\n                    } else {\n                        img_width = parseFloat(size[0]);\n                    }\n                    // compute height\n                    if (size.length == 1 || size[1] == \"auto\") {\n                        img_height = img_width / aspect_ratio;\n                    } else if (/%$/.test(size[1])) {\n                        img_height = orgBox.height * parseFloat(size[1]) / 100;\n                    } else {\n                        img_height = parseFloat(size[1]);\n                    }\n                }\n            }\n\n            var pos = String(backgroundPosition);\n\n            // IE sometimes reports single-word positions\n            // https://github.com/telerik/kendo-ui-core/issues/2786\n            //\n            // it seems to switch to percentages when the horizontal\n            // position is not \"center\", therefore we don't handle\n            // multi-word cases here.  All other browsers return\n            // percentages or pixels instead of keywords.  At least\n            // for now...\n            switch (pos) {\n              case \"bottom\" : pos = \"50% 100%\"; break;\n              case \"top\"    : pos = \"50% 0\"; break;\n              case \"left\"   : pos = \"0 50%\"; break;\n              case \"right\"  : pos = \"100% 50%\"; break;\n              case \"center\" : pos = \"50% 50%\"; break;\n            }\n\n            pos = pos.split(/\\s+/);\n            if (pos.length == 1) {\n                pos[1] = \"50%\";\n            }\n\n            if (/%$/.test(pos[0])) {\n                pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\n            } else {\n                pos[0] = parseFloat(pos[0]);\n            }\n            if (/%$/.test(pos[1])) {\n                pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\n            } else {\n                pos[1] = parseFloat(pos[1]);\n            }\n\n            var rect = new geo.Rect([ orgBox.left + pos[0], orgBox.top + pos[1] ], [ img_width, img_height ]);\n\n            // XXX: background-repeat could be implemented more\n            //      efficiently as a fill pattern (at least for PDF\n            //      output, probably SVG too).\n\n            function rewX() {\n                while (rect.origin.x > box.left) {\n                    rect.origin.x -= img_width;\n                }\n            }\n\n            function rewY() {\n                while (rect.origin.y > box.top) {\n                    rect.origin.y -= img_height;\n                }\n            }\n\n            function repeatX() {\n                while (rect.origin.x < box.right) {\n                    renderBG(group, rect.clone());\n                    rect.origin.x += img_width;\n                }\n            }\n\n            if (backgroundRepeat == \"no-repeat\") {\n                renderBG(group, rect);\n            }\n            else if (backgroundRepeat == \"repeat-x\") {\n                rewX();\n                repeatX();\n            }\n            else if (backgroundRepeat == \"repeat-y\") {\n                rewY();\n                while (rect.origin.y < box.bottom) {\n                    renderBG(group, rect.clone());\n                    rect.origin.y += img_height;\n                }\n            }\n            else if (backgroundRepeat == \"repeat\") {\n                rewX();\n                rewY();\n                var origin = rect.origin.clone();\n                while (rect.origin.y < box.bottom) {\n                    rect.origin.x = origin.x;\n                    repeatX();\n                    rect.origin.y += img_height;\n                }\n            }\n        }\n    }\n\n    function drawBullet() {\n        var listStyleType = getPropertyValue(style, \"list-style-type\");\n        if (listStyleType == \"none\") {\n            return;\n        }\n        var listStylePosition = getPropertyValue(style, \"list-style-position\");\n\n        function _drawBullet(f) {\n            saveStyle(element, function(){\n                element.style.position = \"relative\";\n                var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\n                bullet.style.position = \"absolute\";\n                bullet.style.boxSizing = \"border-box\";\n                if (listStylePosition == \"outside\") {\n                    bullet.style.width = \"6em\";\n                    bullet.style.left = \"-6.8em\";\n                    bullet.style.textAlign = \"right\";\n                } else {\n                    bullet.style.left = \"0px\";\n                }\n                f(bullet);\n                element.insertBefore(bullet, element.firstChild);\n                renderElement(bullet, group);\n                element.removeChild(bullet);\n            });\n        }\n\n        function elementIndex(f) {\n            var a = element.parentNode.children;\n            var k = element.getAttribute(\"kendo-split-index\");\n            if (k != null) {\n                return f(k|0, a.length);\n            }\n            for (var i = 0; i < a.length; ++i) {\n                if (a[i] === element) {\n                    return f(i, a.length);\n                }\n            }\n        }\n\n        switch (listStyleType) {\n          case \"circle\":\n          case \"disc\":\n          case \"square\":\n            _drawBullet(function(bullet){\n                // XXX: the science behind these values is called \"trial and error\".\n                bullet.style.fontSize = \"60%\";\n                bullet.style.lineHeight = \"200%\";\n                bullet.style.paddingRight = \"0.5em\";\n                bullet.style.fontFamily = \"DejaVu Serif\";\n                bullet.innerHTML = {\n                    \"disc\"   : \"\\u25cf\",\n                    \"circle\" : \"\\u25ef\",\n                    \"square\" : \"\\u25a0\"\n                }[listStyleType];\n            });\n            break;\n\n          case \"decimal\":\n          case \"decimal-leading-zero\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    ++idx;\n                    if (listStyleType == \"decimal-leading-zero\" && idx < 10) {\n                        idx = \"0\" + idx;\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n\n          case \"lower-roman\":\n          case \"upper-roman\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    idx = arabicToRoman(idx + 1);\n                    if (listStyleType == \"upper-roman\") {\n                        idx = idx.toUpperCase();\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n\n          case \"lower-latin\":\n          case \"lower-alpha\":\n          case \"upper-latin\":\n          case \"upper-alpha\":\n            _drawBullet(function(bullet){\n                elementIndex(function(idx){\n                    idx = alphaNumeral(idx);\n                    if (/^upper/i.test(listStyleType)) {\n                        idx = idx.toUpperCase();\n                    }\n                    bullet.innerHTML = idx + \".\";\n                });\n            });\n            break;\n        }\n    }\n\n    // draws a single border box\n    function drawOneBox(box, isFirst, isLast) {\n        if (box.width === 0 || box.height === 0) {\n            return;\n        }\n\n        drawBackground(box);\n\n        var shouldDrawLeft = (left.width > 0 && ((isFirst && dir == \"ltr\") || (isLast && dir == \"rtl\")));\n        var shouldDrawRight = (right.width > 0 && ((isLast && dir == \"ltr\") || (isFirst && dir == \"rtl\")));\n\n        // The most general case is that the 4 borders have different widths and border\n        // radiuses.  The way that is handled is by drawing 3 Paths for each border: the\n        // straight line, and two round corners which represent half of the entire rounded\n        // corner.  To simplify code those shapes are drawed at origin (by the drawEdge\n        // function), then translated/rotated into the right position.\n        //\n        // However, this leads to poor results due to rounding in the simpler cases where\n        // borders are straight lines.  Therefore we handle a few such cases separately with\n        // straight lines. C^wC^wC^w -- nope, scratch that.  poor rendering was because of a bug\n        // in Chrome (getClientRects() returns rounded integer values rather than exact floats.\n        // web dev is still a ghetto.)\n\n        // first, just in case there is no border...\n        if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\n            return;\n        }\n\n        // START paint borders\n        // if all borders have equal colors...\n        if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\n\n            // if same widths too, we can draw the whole border by stroking a single path.\n            if (top.width == right.width && top.width == bottom.width && top.width == left.width)\n            {\n                if (shouldDrawLeft && shouldDrawRight) {\n                    // reduce box by half the border width, so we can draw it by stroking.\n                    box = innerBox(box, top.width/2);\n\n                    // adjust the border radiuses, again by top.width/2, and make the path element.\n                    var path = elementRoundBox(element, box, top.width/2);\n                    path.options.stroke = {\n                        color: top.color,\n                        width: top.width\n                    };\n                    group.append(path);\n                    return;\n                }\n            }\n        }\n\n        // if border radiuses are zero and widths are at most one pixel, we can again use simple\n        // paths.\n        if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\n            // alright, 1.9px will do as well.  the difference in color blending should not be\n            // noticeable.\n            if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\n                // top border\n                if (top.width > 0) {\n                    group.append(\n                        new Path({\n                            stroke: { width: top.width, color: top.color }\n                        })\n                            .moveTo(box.left, box.top + top.width/2)\n                            .lineTo(box.right, box.top + top.width/2)\n                    );\n                }\n\n                // bottom border\n                if (bottom.width > 0) {\n                    group.append(\n                        new Path({\n                            stroke: { width: bottom.width, color: bottom.color }\n                        })\n                            .moveTo(box.left, box.bottom - bottom.width/2)\n                            .lineTo(box.right, box.bottom - bottom.width/2)\n                    );\n                }\n\n                // left border\n                if (shouldDrawLeft) {\n                    group.append(\n                        new Path({\n                            stroke: { width: left.width, color: left.color }\n                        })\n                            .moveTo(box.left + left.width/2, box.top)\n                            .lineTo(box.left + left.width/2, box.bottom)\n                    );\n                }\n\n                // right border\n                if (shouldDrawRight) {\n                    group.append(\n                        new Path({\n                            stroke: { width: right.width, color: right.color }\n                        })\n                            .moveTo(box.right - right.width/2, box.top)\n                            .lineTo(box.right - right.width/2, box.bottom)\n                    );\n                }\n\n                return;\n            }\n        }\n        // END paint borders\n\n        var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\n        var rTL = tmp.tl;\n        var rTR = tmp.tr;\n        var rBR = tmp.br;\n        var rBL = tmp.bl;\n\n        // top border\n        drawEdge(top.color,\n                 box.width, top.width, left.width, right.width,\n                 rTL, rTR,\n                 [ 1, 0, 0, 1, box.left, box.top ]);\n\n        // bottom border\n        drawEdge(bottom.color,\n                 box.width, bottom.width, right.width, left.width,\n                 rBR, rBL,\n                 [ -1, 0, 0, -1, box.right, box.bottom ]);\n\n        // for left/right borders we need to invert the border-radiuses\n        function inv(p) {\n            return { x: p.y, y: p.x };\n        }\n\n        // left border\n        drawEdge(left.color,\n                 box.height, left.width, bottom.width, top.width,\n                 inv(rBL), inv(rTL),\n                 [ 0, -1, 1, 0, box.left, box.bottom ]);\n\n        // right border\n        drawEdge(right.color,\n                 box.height, right.width, top.width, bottom.width,\n                 inv(rTR), inv(rBR),\n                 [ 0, 1, -1, 0, box.right, box.top ]);\n    }\n}\n\nfunction gradientRenderer(gradient) {\n    return function(group, rect) {\n        var width = rect.width(), height = rect.height();\n\n        switch (gradient.type) {\n          case \"linear\":\n\n            // figure out the angle.\n            var angle = gradient.angle != null ? gradient.angle : Math.PI;\n            switch (gradient.to) {\n              case \"top\":\n                angle = 0;\n                break;\n              case \"left\":\n                angle = -Math.PI / 2;\n                break;\n              case \"bottom\":\n                angle = Math.PI;\n                break;\n              case \"right\":\n                angle = Math.PI / 2;\n                break;\n              case \"top left\": case \"left top\":\n                angle = -Math.atan2(height, width);\n                break;\n              case \"top right\": case \"right top\":\n                angle = Math.atan2(height, width);\n                break;\n              case \"bottom left\": case \"left bottom\":\n                angle = Math.PI + Math.atan2(height, width);\n                break;\n              case \"bottom right\": case \"right bottom\":\n                angle = Math.PI - Math.atan2(height, width);\n                break;\n            }\n\n            if (gradient.reverse) {\n                angle -= Math.PI;\n            }\n\n            // limit the angle between 0..2PI\n            angle %= 2 * Math.PI;\n            if (angle < 0) {\n                angle += 2 * Math.PI;\n            }\n\n            // compute gradient's start/end points.  here len is the length of the gradient line\n            // and x,y is the end point relative to the center of the rectangle in conventional\n            // (math) axis direction.\n\n            // this is the original (unscaled) length of the gradient line.  needed to deal with\n            // absolutely positioned color stops.  formula from the CSS spec:\n            // http://dev.w3.org/csswg/css-images-3/#linear-gradient-syntax\n            var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\n\n            // The math below is pretty simple, but it took a while to figure out.  We compute x\n            // and y, the *end* of the gradient line.  However, we want to transform them into\n            // element-based coordinates (SVG's gradientUnits=\"objectBoundingBox\").  That means,\n            // x=0 is the left edge, x=1 is the right edge, y=0 is the top edge and y=1 is the\n            // bottom edge.\n            //\n            // A naive approach would use the original angle for these calculations.  Say we'd\n            // like to draw a gradient angled at 45deg in a 100x400 box.  When we use\n            // objectBoundingBox, the renderer will draw it in a 1x1 *square* box, and then\n            // scale that to the desired dimensions.  The 45deg angle will look more like 70deg\n            // after scaling.  SVG (http://www.w3.org/TR/SVG/pservers.html#LinearGradients) says\n            // the following:\n            //\n            //     When gradientUnits=\"objectBoundingBox\" and 'gradientTransform' is the\n            //     identity matrix, the normal of the linear gradient is perpendicular to the\n            //     gradient vector in object bounding box space (i.e., the abstract coordinate\n            //     system where (0,0) is at the top/left of the object bounding box and (1,1) is\n            //     at the bottom/right of the object bounding box). When the object's bounding\n            //     box is not square, the gradient normal which is initially perpendicular to\n            //     the gradient vector within object bounding box space may render\n            //     non-perpendicular relative to the gradient vector in user space. If the\n            //     gradient vector is parallel to one of the axes of the bounding box, the\n            //     gradient normal will remain perpendicular. This transformation is due to\n            //     application of the non-uniform scaling transformation from bounding box space\n            //     to user space.\n            //\n            // which is an extremely long and confusing way to tell what I just said above.\n            //\n            // For this reason we need to apply the reverse scaling to the original angle, so\n            // that when it'll finally be rendered it'll actually be at the desired slope.  Now\n            // I'll let you figure out the math yourself.\n\n            var scaledAngle = Math.atan(width * Math.tan(angle) / height);\n            var sin = Math.sin(scaledAngle), cos = Math.cos(scaledAngle);\n            var len = Math.abs(sin) + Math.abs(cos);\n            var x = len/2 * sin;\n            var y = len/2 * cos;\n\n            // Because of the arctangent, our scaledAngle ends up between -PI/2..PI/2, possibly\n            // losing the intended direction of the gradient.  The following fixes it.\n            if (angle > Math.PI/2 && angle <= 3*Math.PI/2) {\n                x = -x;\n                y = -y;\n            }\n\n            // compute the color stops.\n            var implicit = [], right = 0;\n            var stops = gradient.stops.map(function(s, i){\n                var offset = s.percent;\n                if (offset) {\n                    offset = parseFloat(offset) / 100;\n                } else if (s.length) {\n                    offset = parseFloat(s.length) / pxlen;\n                } else if (i === 0) {\n                    offset = 0;\n                } else if (i == gradient.stops.length - 1) {\n                    offset = 1;\n                }\n                var stop = {\n                    color: s.color.toCssRgba(),\n                    offset: offset\n                };\n                if (offset != null) {\n                    right = offset;\n                    // fix implicit offsets\n                    implicit.forEach(function(s, i){\n                        var stop = s.stop;\n                        stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\n                    });\n                    implicit = [];\n                } else {\n                    implicit.push({ left: right, stop: stop });\n                }\n                return stop;\n            });\n\n            var start = [ 0.5 - x, 0.5 + y ];\n            var end = [ 0.5 + x, 0.5 - y ];\n\n            // finally, draw it.\n            group.append(\n                Path.fromRect(rect)\n                    .stroke(null)\n                    .fill(new LinearGradient({\n                        start     : start,\n                        end       : end,\n                        stops     : stops,\n                        userSpace : false\n                    }))\n            );\n            break;\n          case \"radial\":\n            // XXX:\n            if (window.console && window.console.log) {\n                window.console.log(\"Radial gradients are not yet supported in HTML renderer\");\n            }\n            break;\n        }\n    };\n}\n\nfunction maybeRenderWidget(element, group) {\n    var visual;\n\n    if (element._kendoExportVisual) {\n        visual = element._kendoExportVisual();\n    } else if (window.kendo && window.kendo.jQuery && element.getAttribute(window.kendo.attr(\"role\"))) {\n        var widget = window.kendo.widgetInstance(window.kendo.jQuery(element));\n        if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\n            if (widget.exportDOMVisual) {\n                visual = widget.exportDOMVisual();\n            } else {\n                visual = widget.exportVisual();\n            }\n        }\n    }\n\n    if (!visual) {\n        return false;\n    }\n\n    var wrap = new Group();\n    wrap.children.push(visual);\n\n    var bbox = element.getBoundingClientRect();\n    wrap.transform(geo.transform().translate(bbox.left, bbox.top));\n\n    group.append(wrap);\n\n    return true;\n}\n\nfunction renderImage(element, url, group) {\n    var box = getContentBox(element);\n    var rect = new geo.Rect([ box.left, box.top ], [ box.width, box.height ]);\n    var image = new Image(url, rect);\n    setClipping(image, elementRoundBox(element, box, \"content\"));\n    group.append(image);\n}\n\nfunction zIndexSort(a, b) {\n    var sa = getComputedStyle(a);\n    var sb = getComputedStyle(b);\n    var za = parseFloat(getPropertyValue(sa, \"z-index\"));\n    var zb = parseFloat(getPropertyValue(sb, \"z-index\"));\n    var pa = getPropertyValue(sa, \"position\");\n    var pb = getPropertyValue(sb, \"position\");\n    if (isNaN(za) && isNaN(zb)) {\n        if ((/static|absolute/.test(pa)) && (/static|absolute/.test(pb))) {\n            return 0;\n        }\n        if (pa == \"static\") {\n            return -1;\n        }\n        if (pb == \"static\") {\n            return 1;\n        }\n        return 0;\n    }\n    if (isNaN(za)) {\n        return zb === 0 ? 0 : zb > 0 ? -1 : 1;\n    }\n    if (isNaN(zb)) {\n        return za === 0 ? 0 : za > 0 ? 1 : -1;\n    }\n    return parseFloat(za) - parseFloat(zb);\n}\n\nfunction isFormField(element) {\n    return /^(?:textarea|select|input)$/i.test(element.tagName);\n}\n\nfunction getSelectedOption(element) {\n    if (element.selectedOptions && element.selectedOptions.length > 0) {\n        return element.selectedOptions[0];\n    }\n    return element.options[element.selectedIndex];\n}\n\nfunction renderCheckbox(element, group) {\n    var style = getComputedStyle(element);\n    var color = getPropertyValue(style, \"color\");\n    var box = element.getBoundingClientRect();\n    if (element.type == \"checkbox\") {\n        group.append(\n            Path.fromRect(\n                new geo.Rect([ box.left+1, box.top+1 ],\n                             [ box.width-2, box.height-2 ])\n            ).stroke(color, 1)\n        );\n        if (element.checked) {\n            // fill a rectangle inside?  looks kinda ugly.\n            // group.append(\n            //     Path.fromRect(\n            //         new geo.Rect([ box.left+4, box.top+4 ],\n            //                      [ box.width-8, box.height-8])\n            //     ).fill(color).stroke(null)\n            // );\n\n            // let's draw a checkmark instead.  artistic, eh?\n            group.append(\n                new Path()\n                    .stroke(color, 1.2)\n                    .moveTo(box.left + 0.22 * box.width,\n                            box.top + 0.55 * box.height)\n                    .lineTo(box.left + 0.45 * box.width,\n                            box.top + 0.75 * box.height)\n                    .lineTo(box.left + 0.78 * box.width,\n                            box.top + 0.22 * box.width)\n            );\n        }\n    } else {\n        group.append(\n            new Circle(\n                new geo.Circle([\n                    (box.left + box.right) / 2,\n                    (box.top + box.bottom) / 2\n                ], Math.min(box.width-2, box.height-2) / 2)\n            ).stroke(color, 1)\n        );\n        if (element.checked) {\n            group.append(\n                new Circle(\n                    new geo.Circle([\n                        (box.left + box.right) / 2,\n                        (box.top + box.bottom) / 2\n                    ], Math.min(box.width-8, box.height-8) / 2)\n                ).fill(color).stroke(null)\n            );\n        }\n    }\n}\n\nfunction renderFormField(element, group) {\n    var tag = element.tagName.toLowerCase();\n    if (tag == \"input\" && (element.type == \"checkbox\" || element.type == \"radio\")) {\n        return renderCheckbox(element, group);\n    }\n    var p = element.parentNode;\n    var doc = element.ownerDocument;\n    var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\n    var option;\n    el.style.cssText = getCssText(getComputedStyle(element));\n    if (tag == \"input\") {\n        el.style.whiteSpace = \"pre\";\n    }\n    if (tag == \"select\" || tag == \"textarea\") {\n        el.style.overflow = \"auto\";\n    }\n    if (tag == \"select\") {\n        if (element.multiple) {\n            for (var i = 0; i < element.options.length; ++i) {\n                option = doc.createElement(KENDO_PSEUDO_ELEMENT);\n                option.style.cssText = getCssText(getComputedStyle(element.options[i]));\n                option.style.display = \"block\"; // IE9 messes up without this\n                option.textContent = element.options[i].textContent;\n                el.appendChild(option);\n            }\n        } else {\n            option = getSelectedOption(element);\n            if (option) {\n                el.textContent = option.textContent;\n            }\n        }\n    } else {\n        el.textContent = element.value;\n    }\n    p.insertBefore(el, element);\n    el.scrollLeft = element.scrollLeft;\n    el.scrollTop = element.scrollTop;\n\n    // must temporarily hide the original element, otherwise it\n    // may affect layout of the fake element we want to render.\n    element.style.display = \"none\";\n\n    renderContents(el, group);\n    element.style.display = \"\";\n    p.removeChild(el);\n}\n\nfunction renderContents(element, group) {\n    if (nodeInfo._stackingContext.element === element) {\n        // the group that was set in pushNodeInfo might have\n        // changed due to clipping/transforms, update it here.\n        nodeInfo._stackingContext.group = group;\n    }\n    switch (element.tagName.toLowerCase()) {\n      case \"img\":\n        renderImage(element, element.src, group);\n        break;\n\n      case \"canvas\":\n        try {\n            renderImage(element, element.toDataURL(\"image/png\"), group);\n        } catch (ex) {\n            // tainted; can't draw it, ignore.\n        }\n        break;\n\n      case \"textarea\":\n      case \"input\":\n      case \"select\":\n        renderFormField(element, group);\n        break;\n\n      default:\n        var children = [], floats = [], positioned = [];\n        for (var i = element.firstChild; i; i = i.nextSibling) {\n            switch (i.nodeType) {\n              case 3:         // Text\n                if (/\\S/.test(i.data)) {\n                    renderText(element, i, group);\n                }\n                break;\n              case 1:         // Element\n                var style = getComputedStyle(i);\n                var floating = getPropertyValue(style, \"float\");\n                var position = getPropertyValue(style, \"position\");\n                if (position != \"static\") {\n                    positioned.push(i);\n                }\n                else if (floating != \"none\") {\n                    floats.push(i);\n                } else {\n                    children.push(i);\n                }\n                break;\n            }\n        }\n\n        mergeSort(children, zIndexSort).forEach(function(el){ renderElement(el, group); });\n        mergeSort(floats, zIndexSort).forEach(function(el){ renderElement(el, group); });\n        mergeSort(positioned, zIndexSort).forEach(function(el){ renderElement(el, group); });\n    }\n}\n\nfunction renderText(element, node, group) {\n    if (emptyClipbox()) {\n        return;\n    }\n    var style = getComputedStyle(element);\n\n    if (parseFloat(getPropertyValue(style, \"text-indent\")) < -500) {\n        // assume it should not be displayed.  the slider's\n        // draggable handle displays a Drag text for some reason,\n        // having text-indent: -3333px.\n        return;\n    }\n\n    var text = node.data;\n    var start = 0;\n    var end = text.search(/\\S\\s*$/) + 1;\n\n    if (!end) {\n        return; // whitespace-only node\n    }\n\n    var fontSize = getPropertyValue(style, \"font-size\");\n    var lineHeight = getPropertyValue(style, \"line-height\");\n\n    // simply getPropertyValue(\"font\") doesn't work in Firefox :-\\\n    var font = [\n        getPropertyValue(style, \"font-style\"),\n        getPropertyValue(style, \"font-variant\"),\n        getPropertyValue(style, \"font-weight\"),\n        fontSize, // no need for line height here; it breaks layout in FF\n        getPropertyValue(style, \"font-family\")\n    ].join(\" \");\n\n    fontSize = parseFloat(fontSize);\n    lineHeight = parseFloat(lineHeight);\n\n    if (fontSize === 0) {\n        return;\n    }\n\n    var color = getPropertyValue(style, \"color\");\n    var range = element.ownerDocument.createRange();\n    var align = getPropertyValue(style, \"text-align\");\n    var isJustified = align == \"justify\";\n    var columnCount = getPropertyValue(style, \"column-count\", 1);\n    var whiteSpace = getPropertyValue(style, \"white-space\");\n    var textTransform = getPropertyValue(style, \"text-transform\");\n\n    // IE shrinks the text with text-overflow: ellipsis,\n    // apparently because the returned bounding box for the range\n    // is limited to the visible area minus space for the dots,\n    // instead of being the full width of the text.\n    //\n    // https://github.com/telerik/kendo/issues/5232\n    var textOverflow, saveTextOverflow;\n    if (browser.msie || browser.edge) {\n        textOverflow = style.textOverflow;             // computed style\n        if (textOverflow == \"ellipsis\") {\n            saveTextOverflow = element.style.textOverflow; // own style.\n            element.style.textOverflow = \"clip\";\n        }\n    }\n\n    // A line of 500px, with a font of 12px, contains an average of 80 characters, but since we\n    // err, we'd like to guess a bigger number rather than a smaller one.  Multiplying by 5\n    // seems to be a good option.\n    var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\n    if (estimateLineLength === 0) {\n        estimateLineLength = 500;\n    }\n\n    // we'll maintain this so we can workaround bugs in Chrome's Range.getClientRects\n    // https://github.com/telerik/kendo/issues/5740\n    var prevLineBottom = null;\n\n    var underline = nodeInfo[\"underline\"];\n    var lineThrough = nodeInfo[\"line-through\"];\n    var overline = nodeInfo[\"overline\"];\n    var hasDecoration = underline || lineThrough || overline;\n\n    // doChunk returns true when all text has been rendered\n    while (!doChunk()) {}\n\n    if ((browser.msie || browser.edge) && textOverflow == \"ellipsis\") {\n        element.style.textOverflow = saveTextOverflow;\n    }\n\n    if (hasDecoration) {\n        range.selectNode(node);\n        slice(range.getClientRects()).forEach(decorate);\n    }\n\n    return;                 // only function declarations after this line\n\n    function actuallyGetRangeBoundingRect(range) {\n        // XXX: to be revised when this Chrome bug is fixed:\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=612459\n        if (browser.msie || browser.edge || browser.chrome) {\n            // Workaround browser bugs: IE and Chrome would sometimes\n            // return 0 or 1-width rectangles before or after the main\n            // one.  https://github.com/telerik/kendo/issues/4674\n\n            // Actually Chrome 50 got worse, since the rectangles can now have the width of a\n            // full character, making it hard to tell whether it's a bogus rectangle or valid\n            // selection location.  The workaround is to ignore rectangles that fall on the\n            // previous line.  https://github.com/telerik/kendo/issues/5740\n            var rectangles = range.getClientRects(), box = {\n                top    :  Infinity,\n                right  : -Infinity,\n                bottom : -Infinity,\n                left   :  Infinity\n            };\n            for (var i = 0; i < rectangles.length; ++i) {\n                var b = rectangles[i];\n                if (b.width <= 1 || b.bottom === prevLineBottom) {\n                    continue;   // bogus rectangle\n                }\n                box.left   = Math.min(b.left   , box.left);\n                box.top    = Math.min(b.top    , box.top);\n                box.right  = Math.max(b.right  , box.right);\n                box.bottom = Math.max(b.bottom , box.bottom);\n            }\n            box.width = box.right - box.left;\n            box.height = box.bottom - box.top;\n            return box;\n        }\n        return range.getBoundingClientRect();\n    }\n\n    // Render a chunk of text, typically one line (but for justified text we render each word as\n    // a separate Text object, because spacing is variable).  Returns true when it finished the\n    // current node.  After each chunk it updates `start` to just after the last rendered\n    // character.\n    function doChunk() {\n        var origStart = start;\n        var box, pos = text.substr(start).search(/\\S/);\n        start += pos;\n        if (pos < 0 || start >= end) {\n            return true;\n        }\n\n        // Select a single character to determine the height of a line of text.  The box.bottom\n        // will be essential for us to figure out where the next line begins.\n        range.setStart(node, start);\n        range.setEnd(node, start + 1);\n        box = actuallyGetRangeBoundingRect(range);\n\n        // for justified text we must split at each space, because space has variable width.\n        var found = false;\n        if (isJustified || columnCount > 1) {\n            pos = text.substr(start).search(/\\s/);\n            if (pos >= 0) {\n                // we can only split there if it's on the same line, otherwise we'll fall back\n                // to the default mechanism (see findEOL below).\n                range.setEnd(node, start + pos);\n                var r = actuallyGetRangeBoundingRect(range);\n                if (r.bottom == box.bottom) {\n                    box = r;\n                    found = true;\n                    start += pos;\n                }\n            }\n        }\n\n        if (!found) {\n            // This code does three things: (1) it selects one line of text in `range`, (2) it\n            // leaves the bounding rect of that line in `box` and (3) it returns the position\n            // just after the EOL.  We know where the line starts (`start`) but we don't know\n            // where it ends.  To figure this out, we select a piece of text and look at the\n            // bottom of the bounding box.  If it changes, we have more than one line selected\n            // and should retry with a smaller selection.\n            //\n            // To speed things up, we first try to select all text in the node (`start` ->\n            // `end`).  If there's more than one line there, then select only half of it.  And\n            // so on.  When we find a value for `end` that fits in one line, we try increasing\n            // it (also in halves) until we get to the next line.  The algorithm stops when the\n            // right side of the bounding box does not change.\n            //\n            // One more thing to note is that everything happens in a single Text DOM node.\n            // There's no other tags inside it, therefore the left/top coordinates of the\n            // bounding box will not change.\n            pos = (function findEOL(min, eol, max){\n                range.setEnd(node, eol);\n                var r = actuallyGetRangeBoundingRect(range);\n                if (r.bottom != box.bottom && min < eol) {\n                    return findEOL(min, (min + eol) >> 1, eol);\n                } else if (r.right != box.right) {\n                    box = r;\n                    if (eol < max) {\n                        return findEOL(eol, (eol + max) >> 1, max);\n                    } else {\n                        return eol;\n                    }\n                } else {\n                    return eol;\n                }\n            })(start, Math.min(end, start + estimateLineLength), end);\n\n            if (pos == start) {\n                // if EOL is at the start, then no more text fits on this line.  Skip the\n                // remainder of this node entirely to avoid a stack overflow.\n                return true;\n            }\n            start = pos;\n\n            pos = range.toString().search(/\\s+$/);\n            if (pos === 0) {\n                return false; // whitespace only; we should not get here.\n            }\n            if (pos > 0) {\n                // eliminate trailing whitespace\n                range.setEnd(node, range.startOffset + pos);\n                box = actuallyGetRangeBoundingRect(range);\n            }\n        }\n\n        // another workaround for IE: if we rely on getBoundingClientRect() we'll overlap with the bullet for LI\n        // elements.  Calling getClientRects() and using the *first* rect appears to give us the correct location.\n        // Note: not to be used in Chrome as it randomly returns a zero-width rectangle from the previous line.\n        if (browser.msie || browser.edge) {\n            box = range.getClientRects()[0];\n        }\n\n        var str = range.toString();\n        if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\n            // node with non-significant space -- collapse whitespace.\n            str = str.replace(/\\s+/g, \" \");\n        }\n        else if (/\\t/.test(str)) {\n            // with significant whitespace we need to do something about literal TAB characters.\n            // There's no TAB glyph in a font so they would be rendered in PDF as an empty box,\n            // and the whole text will stretch to fill the original width.  The core PDF lib\n            // does not have sufficient context to deal with it.\n\n            // calculate the starting column here, since we initially discarded any whitespace.\n            var cc = 0;\n            for (pos = origStart; pos < range.startOffset; ++pos) {\n                var code = text.charCodeAt(pos);\n                if (code == 9) {\n                    // when we meet a TAB we must round up to the next tab stop.\n                    // in all browsers TABs seem to be 8 characters.\n                    cc += 8 - cc % 8;\n                } else if (code == 10 || code == 13) {\n                    // just in case we meet a newline we must restart.\n                    cc = 0;\n                } else {\n                    // ordinary character --> advance one column\n                    cc++;\n                }\n            }\n\n            // based on starting column, replace any TAB characters in the string we actually\n            // have to display with spaces so that they align to columns multiple of 8.\n            while ((pos = str.search(\"\\t\")) >= 0) {\n                var indent = \"        \".substr(0, 8 - (cc + pos) % 8);\n                str = str.substr(0, pos) + indent + str.substr(pos + 1);\n            }\n        }\n\n        if (!found) {\n            prevLineBottom = box.bottom;\n        }\n        drawText(str, box);\n    }\n\n    function drawText(str, box) {\n        // In IE the box height will be approximately lineHeight, while in\n        // other browsers it'll (correctly) be the height of the bounding\n        // box for the current text/font.  Which is to say, IE sucks again.\n        // The only good solution I can think of is to measure the text\n        // ourselves and center the bounding box.\n        if ((browser.msie || browser.edge) && !isNaN(lineHeight)) {\n            var height = getFontHeight(font);\n            var top = (box.top + box.bottom - height) / 2;\n            box = {\n                top    : top,\n                right  : box.right,\n                bottom : top + height,\n                left   : box.left,\n                height : height,\n                width  : box.right - box.left\n            };\n        }\n\n        // var path = new Path({ stroke: { color: \"red\" }});\n        // path.moveTo(box.left, box.top)\n        //     .lineTo(box.right, box.top)\n        //     .lineTo(box.right, box.bottom)\n        //     .lineTo(box.left, box.bottom)\n        //     .close();\n        // group.append(path);\n\n        switch (textTransform) {\n          case \"uppercase\":\n            str = str.toUpperCase();\n            break;\n          case \"lowercase\":\n            str = str.toLowerCase();\n            break;\n          case \"capitalize\":\n            str = str.replace(/(?:^|\\s)\\S/g, l => l.toUpperCase());\n            break;\n        }\n\n        var text = new TextRect(\n            str, new geo.Rect([ box.left, box.top ],\n                              [ box.width, box.height ]),\n            {\n                font: font,\n                fill: { color: color }\n            }\n        );\n        group.append(text);\n    }\n\n    function decorate(box) {\n        line(underline, box.bottom);\n        line(lineThrough, box.bottom - box.height / 2.7);\n        line(overline, box.top);\n        function line(color, ypos) {\n            if (color) {\n                var width = fontSize / 12;\n                var path = new Path({ stroke: {\n                    width: width,\n                    color: color\n                }});\n\n                ypos -= width;\n                path.moveTo(box.left, ypos)\n                    .lineTo(box.right, ypos);\n                group.append(path);\n            }\n        }\n    }\n}\n\nfunction groupInStackingContext(element, group, zIndex) {\n    var main;\n    if (zIndex != \"auto\") {\n        // use the current stacking context\n        main = nodeInfo._stackingContext.group;\n        zIndex = parseFloat(zIndex);\n    } else {\n        // normal flow â€” use given container.  we still have to\n        // figure out where should we insert this element with the\n        // assumption that its z-index is zero, as the group might\n        // already contain elements with higher z-index.\n        main = group;\n        zIndex = 0;\n    }\n    var a = main.children;\n    for (var i = 0; i < a.length; ++i) {\n        if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\n            break;\n        }\n    }\n\n    var tmp = new Group();\n    main.insert(i, tmp);\n    tmp._dom_zIndex = zIndex;\n\n    if (main !== group) {\n        // console.log(\"Placing\", element, \"in\", nodeInfo._stackingContext.element, \"at position\", i, \" / \", a.length);\n        // console.log(a.slice(i+1));\n\n        // if (nodeInfo._matrix) {\n        //     tmp.transform(nodeInfo._matrix);\n        // }\n        if (nodeInfo._clipbox) {\n            var m = nodeInfo._matrix.invert();\n            var r = nodeInfo._clipbox.transformCopy(m);\n            setClipping(tmp, Path.fromRect(r));\n            // console.log(r);\n            // tmp.append(Path.fromRect(r));\n            // tmp.append(new Text(element.className || element.id, r.topLeft()));\n        }\n    }\n\n    return tmp;\n}\n\nfunction renderElement(element, container) {\n    var style = getComputedStyle(element);\n\n    updateCounters(style);\n\n    if (/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(element.tagName)) {\n        return;\n    }\n\n    if (nodeInfo._clipbox == null) {\n        return;\n    }\n\n    var opacity = parseFloat(getPropertyValue(style, \"opacity\"));\n    var visibility = getPropertyValue(style, \"visibility\");\n    var display = getPropertyValue(style, \"display\");\n\n    if (opacity === 0 || visibility == \"hidden\" || display == \"none\") {\n        return;\n    }\n\n    var tr = getTransform(style);\n    var group;\n\n    var zIndex = getPropertyValue(style, \"z-index\");\n    if ((tr || opacity < 1) && zIndex == \"auto\") {\n        zIndex = 0;\n    }\n    group = groupInStackingContext(element, container, zIndex);\n\n    // XXX: remove at some point\n    // group._pdfElement = element;\n    // group.options._pdfDebug = \"\";\n    // if (element.id) {\n    //     group.options._pdfDebug = \"#\" + element.id;\n    // }\n    // if (element.className) {\n    //     group.options._pdfDebug += \".\" + element.className.split(\" \").join(\".\");\n    // }\n\n    if (opacity < 1) {\n        group.opacity(opacity * group.opacity());\n    }\n\n    pushNodeInfo(element, style, group);\n\n    if (!tr) {\n        _renderWithPseudoElements(element, group);\n    }\n    else {\n        saveStyle(element, function(){\n            // must clear transform, so getBoundingClientRect returns correct values.\n            pleaseSetPropertyValue(element.style, \"transform\", \"none\", \"important\");\n\n            // must also clear transitions, so correct values are returned *immediately*\n            pleaseSetPropertyValue(element.style, \"transition\", \"none\", \"important\");\n\n            // the presence of any transform makes it behave like it had position: relative,\n            // because why not.\n            // http://meyerweb.com/eric/thoughts/2011/09/12/un-fixing-fixed-elements-with-css-transforms/\n            if (getPropertyValue(style, \"position\") == \"static\") {\n                // but only if it's not already positioned. :-/\n                pleaseSetPropertyValue(element.style, \"position\", \"relative\", \"important\");\n            }\n\n            // must translate to origin before applying the CSS\n            // transformation, then translate back.\n            var bbox = element.getBoundingClientRect();\n            var x = bbox.left + tr.origin[0];\n            var y = bbox.top + tr.origin[1];\n            var m = [ 1, 0, 0, 1, -x, -y ];\n            m = mmul(m, tr.matrix);\n            m = mmul(m, [ 1, 0, 0, 1, x, y ]);\n            m = setTransform(group, m);\n\n            nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\n\n            _renderWithPseudoElements(element, group);\n        });\n    }\n\n    popNodeInfo();\n\n    //drawDebugBox(element.getBoundingClientRect(), container);\n}\n\n// function drawDebugBox(box, group, color) {\n//     var path = Path.fromRect(new geo.Rect([ box.left, box.top ], [ box.width, box.height ]));\n//     if (color) {\n//         path.stroke(color);\n//     }\n//     group.append(path);\n// }\n\n// function dumpTextNode(node) {\n//     var txt = node.data.replace(/^\\s+/, \"\");\n//     if (txt.length < 100) {\n//         console.log(node.data.length + \": |\" + txt);\n//     } else {\n//         console.log(node.data.length + \": |\" + txt.substr(0, 50) + \"|...|\" + txt.substr(-50));\n//     }\n// }\n\nfunction mmul(a, b) {\n    var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\n    var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\n    return [\n        a1*a2 + b1*c2,          a1*b2 + b1*d2,\n        c1*a2 + d1*c2,          c1*b2 + d1*d2,\n        e1*a2 + f1*c2 + e2,     e1*b2 + f1*d2 + f2\n    ];\n}\n\nexport { drawDOM };\n\n"],"names":["const","super","let"],"mappings":"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"}